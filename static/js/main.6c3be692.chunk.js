(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,a,t){e.exports=t(146)},119:function(e,a,t){},146:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(13),i=t.n(c),l=(t(119),t(24)),o=t(34),m=t(35),u=t.n(m),s=t(201),d=t(186),E=t(39),p=t(187),f=t(48),b=t(189),v=t(191),g=t(192),y=t(193),O=t(190),h=t(194),j=t(102),w=t.n(j),I=t(147),S=t(188),k=t(195),C=t(75);t(86);var N=t(203),x=t(185),$=t(183),D=Object($.a)(function(e){return{error:{backgroundColor:e.palette.error.dark}}}),z=function(e){var a=e.message,t=Object(n.useState)(!0),c=Object(l.a)(t,2),i=c[0],o=c[1],m=D();if(!a)return null;function u(e,a){"clickaway"!==a&&o(!1)}return r.a.createElement(N.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:6e3,onClose:u,open:i},r.a.createElement(x.a,{className:m.error,message:a,onClose:u}))},M=t(100),A=t(52);function R(e){return Object(A.a)(new Date(e),"HH:mm")}function T(){var e=Object(o.a)(["\n  query getEntries($spaceId: String!) {\n    entries(spaceId: $spaceId) {\n      id\n      time\n    }\n  }\n"]);return T=function(){return e},e}var F=u()(T());function W(){var e=Object(o.a)(["\n  mutation CreateEntry($spaceId: String!, $time: Int!) {\n    createEntry(spaceId: $spaceId, time: $time) {\n      id\n    }\n  }\n"]);return W=function(){return e},e}function q(e){var a=e.text,t=e.last,c=Object(n.useState)(0),i=Object(l.a)(c,2),o=i[0],m=i[1];return function(e,a){var t=Object(n.useRef)();Object(n.useEffect)(function(){t.current=e},[e]),Object(n.useEffect)(function(){if(null!==a){var e=setInterval(function(){t.current()},a);return function(){return clearInterval(e)}}},[a])}(function(){m(o+1)},3e4),t?r.a.createElement("span",null,a,": ",function(e){var a=e/1e3/60;return a<1?"< 1min":"".concat(Math.round(a)," min")}(Date.now()-t.now)):null}var H=u()(W()),J=864e5;var Q=function(e){var a=e.spaceId,t=Object(s.a)(F,{variables:{spaceId:a}}),n=t.loading,c=t.data,i=t.error,o=Object(d.a)(H,{refetchQueries:["getEntries"]}),m=Object(l.a)(o,1)[0],u=!n&&!i&&c.entries.reduce(function(e,a){var t=Object(M.a)(new Date(1e3*a.time)).getTime();return e[t]=e[t]||[],e[t].push(a),e},{}),j=Date.now();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},i&&r.a.createElement(z,{message:i.toString()}),!n&&r.a.createElement(f.a,{variant:"h5",component:"p"},r.a.createElement(q,{text:"Since last event",last:0})),r.a.createElement(p.a,{variant:"contained",size:"large",color:"primary",onClick:function(){return m({variables:{time:Math.round(Date.now()/1e3),spaceId:a}})}},"Now")),r.a.createElement(S.a,{maxWidth:"sm"},!n&&!i&&r.a.createElement(I.a,null,!n&&c&&c.entries.length>0&&r.a.createElement(b.a,null,r.a.createElement(C.CSSTransitionGroup,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},Object.entries(u).map(function(e){var a=Object(l.a)(e,2),t=a[0],n=a[1];return r.a.createElement("div",{key:t},r.a.createElement(O.a,null,Object(A.a)(parseInt(t,10),"d MMM, yyyy")),r.a.createElement(C.CSSTransitionGroup,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},n.map(function(e){var a=e.time,t=e.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{key:t},r.a.createElement(g.a,{primary:R(1e3*a)}),j-1e3*a<J&&r.a.createElement(y.a,null,r.a.createElement(h.a,{edge:"end","aria-label":"Comments",component:E.b,to:"/edit/".concat(t)},r.a.createElement(w.a,null)))),r.a.createElement(v.a,{key:"post-element".concat(t)},"20min"))})))}))),!n&&c&&0===c.entries.length&&r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,{primary:"Click the button to start measuring intervals"})))),n&&r.a.createElement(k.a,null)))},G=t(199),L=t(196);var B=function(e){var a=e.onSelect,t=Object(n.useState)(""),c=Object(l.a)(t,2),i=c[0],o=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"}),r.a.createElement("form",{onSubmit:function(){return a(i)}},r.a.createElement(L.a,{container:!0,spacing:5,direction:"column"},r.a.createElement(L.a,{item:!0},r.a.createElement(G.a,{label:"Space name",value:i,onChange:function(e){return o(e.target.value)},margin:"normal"})),r.a.createElement(L.a,{item:!0},r.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary"},"Proceed")))))},U=t(107),_=t(105),K=t(66),P=t(104),V=t(65),X=t(64),Y=t(103),Z=t(37),ee=t(197),ae=t(202),te=t(61),ne=t(67),re=t.n(ne),ce=t(68),ie=t.n(ce),le=t(204);function oe(e){var a=null,t=!1;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];t?a=function(){return e.apply(void 0,r)}:function e(n){t=!0,n().then(function(){if(t=!1,null!=a){var n=a;a=null,e(n)}})}(function(){return e.apply(void 0,r)})}}function me(){var e=Object(o.a)(["\n  mutation RemoveEntry($id: String!) {\n    removeEntry(id: $id) {\n      message\n      removedId\n    }\n  }\n"]);return me=function(){return e},e}function ue(){var e=Object(o.a)(["\n  mutation UpdateEntry($id: String!, $time: Int!) {\n    updateEntry(id: $id, time: $time) {\n      id\n      time\n    }\n  }\n"]);return ue=function(){return e},e}function se(){var e=Object(o.a)(["\n  query getEntry($id: String!) {\n    entry(id: $id) {\n      id\n      time\n    }\n  }\n"]);return se=function(){return e},e}var de=u()(se()),Ee=u()(ue()),pe=u()(me()),fe=Object($.a)(function(e){return Object(le.a)({root:{padding:e.spacing(3,5)}})});var be=function(e){var a=e.spaceId,t=e.match.params.id,c=Object(s.a)(de,{variables:{id:t}}),i=c.loading,o=c.data,m=Object(d.a)(pe,{variables:{id:t},update:function(e,t){var n=t.data.removeEntry,r=null;try{r=e.readQuery({query:F,variables:{spaceId:a}})}catch(c){}r&&e.writeQuery({query:F,variables:{spaceId:a},data:{entries:r.entries.filter(function(e){return e.id!==n.removedId})}})}}),u=Object(l.a)(m,2),E=u[0],b=u[1].data,v=Object(n.useState)(null),g=Object(l.a)(v,2),y=g[0],O=g[1],h=Object(te.b)(),j=Object(n.useCallback)(oe(function(e){return h.mutate({mutation:Ee,variables:Object(U.a)({id:t},e)})}),[a,t]);null!==y||i||O(new Date(1e3*o.entry.time));var w,C=function(e){O(e),j({time:Math.round(e.getTime()/1e3)})},N=fe();return b?r.a.createElement(Z.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},!i&&r.a.createElement(f.a,null,R(y)," ",(w=y,Object(A.a)(new Date(w),"d MMM, yyyy")))),r.a.createElement(S.a,{maxWidth:"sm"},i?r.a.createElement(k.a,null):r.a.createElement(L.a,{container:!0,spacing:2,direction:"row",justify:"center"},r.a.createElement(L.a,{item:!0,xs:12,md:4},r.a.createElement(I.a,{className:N.root},r.a.createElement(f.a,{paragraph:!0},"Day"),r.a.createElement(ee.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return C(Object(X.a)(y,1))}},r.a.createElement(re.a,null)),r.a.createElement(ee.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return C(Object(Y.a)(y,1))}},r.a.createElement(ie.a,null)))),r.a.createElement(L.a,{item:!0,xs:12,md:4},r.a.createElement(I.a,{className:N.root},r.a.createElement(f.a,{paragraph:!0},"Hours"),r.a.createElement(ee.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return C(Object(V.a)(y,1))}},r.a.createElement(re.a,null)),r.a.createElement(ee.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return C(Object(P.a)(y,1))}},r.a.createElement(ie.a,null)))),r.a.createElement(L.a,{item:!0,xs:12,md:4},r.a.createElement(I.a,{className:N.root},r.a.createElement(f.a,{paragraph:!0},"Minutes"),r.a.createElement(ee.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return C(Object(K.a)(y,5))}},r.a.createElement(re.a,null)),r.a.createElement(ee.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return C(Object(_.a)(y,5))}},r.a.createElement(ie.a,null)))),r.a.createElement(L.a,{item:!0,xs:12,md:12},r.a.createElement(I.a,{className:N.root},r.a.createElement(f.a,{paragraph:!0},"Extra food"),r.a.createElement(ae.a,{defaultValue:30,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:10,min:10,max:110}))),r.a.createElement(L.a,{item:!0,xs:12,md:12},r.a.createElement(I.a,{className:N.root},r.a.createElement(f.a,{paragraph:!0},"Danger zone"),r.a.createElement(p.a,{variant:"contained",color:"secondary",onClick:E},"Delete"))))))},ve=t(198),ge=Object($.a)(function(e){return Object(le.a)({root:{padding:e.spacing(5,2)}})}),ye=function(){var e=ge();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},"ERROR 404"),r.a.createElement(S.a,{className:e.root,maxWidth:"sm"},r.a.createElement(f.a,{variant:"h5",paragraph:!0},"NOT FOUND"),r.a.createElement(f.a,{variant:"body"},"Go back to the ",r.a.createElement(ve.a,{to:"/",component:E.b},"homepage"))))};var Oe=function(e){var a=e.storage,t=a.read,c=a.write,i=Object(n.useState)(t("food-time-space-id")),o=Object(l.a)(i,2),m=o[0],u=o[1];return Object(n.useEffect)(function(){c("food-time-space-id",m)},[m,c]),r.a.createElement("div",{className:"App"},r.a.createElement(E.a,null,r.a.createElement(Z.d,null,m?r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.b,{exact:!0,path:"/",render:function(){return r.a.createElement(Q,{spaceId:m})}}),r.a.createElement(Z.b,{path:"/edit/:id",render:function(e){return r.a.createElement(be,Object.assign({},e,{spaceId:m}))}})):r.a.createElement(Z.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(B,Object.assign({},e,{onSelect:function(e){return u(e)}}))}}),r.a.createElement(Z.b,{component:ye}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=t(43),je=t(108),we=t(106),Ie=new he.a({cache:new we.a({cacheRedirects:{Query:{entry:function(e,a,t){return(0,t.getCacheKey)({__typename:"Entry",id:a.id})}}}}),link:Object(je.a)({uri:"https://papi.ertrzyiks.me/food-time"})});i.a.render(r.a.createElement(te.a,{client:Ie},r.a.createElement(Oe,{storage:{read:function(e){return JSON.parse(window.localStorage.getItem(e))},write:function(e,a){return window.localStorage.setItem(e,JSON.stringify(a))}}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},86:function(e,a,t){}},[[114,1,2]]]);
//# sourceMappingURL=main.6c3be692.chunk.js.map