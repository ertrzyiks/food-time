(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(e,t,a){e.exports=a(233)},179:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),c=a.n(i),o=(a(179),a(11)),l=a(34),s=a(46),u=a(32),m=a(55),d=a(162),f=a(21),p=a(65),g=a.n(p),b=a(166),E=a(264),v=a(265),h=a(258),y=a(235),O=a(256),j=a(266),_=a(254),k=a(280),w=a(255),x=Object(_.a)(function(e){return{error:{backgroundColor:e.palette.error.dark}}}),N=function(e){var t=e.message,a=Object(n.useState)(!0),i=Object(o.a)(a,2),c=i[0],l=i[1],s=x();if(!t)return null;function u(e,t){"clickaway"!==t&&l(!1)}return t.networkError&&t.networkError.result&&t.networkError.result.errors&&t.networkError.result.errors.length>0&&(t=t.networkError.result.errors[0].message.slice(0,100)),r.a.createElement(k.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:6e3,onClose:u,open:c},r.a.createElement(w.a,{className:s.error,message:t.toString(),onClose:u}))},I=a(260),C=a(259),S=a(261),$=a(149),T=a.n($),L=a(48),D=a(139),F=a(74);function B(e){return Object(L.a)(new Date(e),"HH:mm")}function A(e){return Object(L.a)(new Date(e),"d MMM, yyyy")}function z(e,t){var a=Object(D.a)(e,t),n=Object(F.a)(e,t)%60;return a<1?"".concat(n,"min"):"".concat(a,"h ").concat(n,"min")}var P=a(62);function M(e,t){var a=Object(n.useRef)();Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}var R=function(e){var t=e.time,a=e.key,i=e.className,c=Object(n.useState)(0),l=Object(o.a)(c,2),s=l[0],u=l[1];M(function(){u(s+1)},15e3);var m=Date.now(),d=new Date(1e3*t);return r.a.createElement(y.a,{key:a,className:i},r.a.createElement(O.a,{primary:"Next at ".concat(B(d)),secondary:d>m&&z(d,m)}))},W=a(257),q=a(111),H=a.n(q),G=a(110),Q=a.n(G),V=Object(_.a)({icon_wrapper:{display:"flex",flexDirection:"column",fontSize:12,marginRight:5,textAlign:"center"},bottle_icon:{color:"#24a0ff"},icon_container:{display:"flex"},small_icon:{fontSize:"1rem"}}),J=function(e){var t,a=e.type,n=e.extra_food,i=e.feeding_duration,c=V(),o=i?r.a.createElement("span",null,i,"'"):null;switch(a){case"breast":t=r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,null),o);break;case"bottle":t=r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{className:c.bottle_icon})," ",n,"ml");break;case"mixed":t=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:c.icon_container},r.a.createElement(Q.a,{className:c.small_icon}),r.a.createElement(H.a,{className:[c.bottle_icon,c.small_icon].join(" ")})),r.a.createElement("span",null,n,"ml"),o)}return r.a.createElement(W.a,null,r.a.createElement("div",{className:c.icon_wrapper},t))},X=a(22),U=a(23),Y=a.n(U);function K(){var e=Object(X.a)(["\n  query getActivityLog($spaceId: String!) {\n    activity_log(spaceId: $spaceId) {\n      id\n      spaceId\n      time\n      message\n    }\n  }\n"]);return K=function(){return e},e}var Z=Y()(K());function ee(){var e=Object(X.a)(["\n  query getEntries($spaceId: String!) {\n    entries(spaceId: $spaceId) {\n      id\n      time\n      extra_food\n      spaceId\n      type  \n      vitamin\n      source\n      feeding_duration\n    }\n  }\n"]);return ee=function(){return e},e}var te=Y()(ee());function ae(){var e=Object(X.a)(["\n  query getEntry($id: String!) {\n    entry(id: $id) {\n      id\n      time\n      extra_food\n      spaceId\n      type \n      vitamin\n      source\n      feeding_duration\n    }\n  }\n"]);return ae=function(){return e},e}var ne=Y()(ae());function re(){var e=Object(X.a)(["\n  mutation CreateEntry($spaceId: String!, $time: Int!) {\n    createEntry(spaceId: $spaceId, time: $time) {\n      id\n      time\n      extra_food\n      type  \n      vitamin\n      source\n      feeding_duration\n    }\n  }\n"]);return re=function(){return e},e}var ie=Y()(re());function ce(){var e=Object(X.a)(["\n  mutation UpdateEntry($id: String!, $time: Int, $extra_food: Int, $type: String, $vitamin: Boolean, $source: String, $feeding_duration: Int) {\n    updateEntry(id: $id, time: $time, extra_food: $extra_food, type: $type, vitamin: $vitamin, source: $source, feeding_duration: $feeding_duration) {\n      id\n      time\n      extra_food\n      type  \n      vitamin\n      source\n      feeding_duration\n    }\n  }\n"]);return ce=function(){return e},e}var oe=Y()(ce());function le(){var e=Object(X.a)(["\n  mutation RemoveEntry($id: String!) {\n    removeEntry(id: $id) {\n      message\n      removedId\n    }\n  }\n"]);return le=function(){return e},e}var se=Y()(le());function ue(){var e=Object(X.a)(["\n  mutation CreateActivityLogEntry($spaceId: String!, $time: Int!, $message: String!) {\n    createActivityLogEntry(spaceId: $spaceId, time: $time, message: $message) {\n      id\n      time\n      spaceId\n      message  \n    }\n  }\n"]);return ue=function(){return e},e}var me=Y()(ue());function de(){var e=Object(X.a)(["\n  query getSpaces {\n    spaces {\n      id\n      display_name\n    }\n  }\n"]);return de=function(){return e},e}var fe=Y()(de());function pe(){var e=Object(X.a)(["\n  mutation CreateSpace($name: String!) {\n    createSpace(name: $name) {\n      id\n      display_name\n    }\n  }\n"]);return pe=function(){return e},e}var ge=Y()(pe());function be(){var e=Object(X.a)(["\n  query getStats($spaceId: String!, $daysAgo: Int!) {\n    stats(spaceId: $spaceId, daysAgo: $daysAgo) {\n      extra_food_per_day {\n        date\n        extra_food\n      }\n        \n      feeding_count_per_day {\n        date\n        feeding_count\n      }\n    }\n  }\n"]);return be=function(){return e},e}var Ee=Y()(be());function ve(){var e=Object(X.a)(["\n  query getStats($spaceId: String!, $daysAgo: Int!) {\n    stats(spaceId: $spaceId, daysAgo: $daysAgo) {\n      night_breaks {\n        date\n        firstBreakDurationInMins\n        secondBreakDurationInMins\n      }\n\n      average_day_break {\n        date\n        average_duration_mins\n      }\n    }\n  }\n"]);return ve=function(){return e},e}var he=Y()(ve());function ye(){var e=Object(X.a)(["\n  query getAggregatedStats($spaceId: String!) {\n    aggregated_stats(spaceId: $spaceId) {\n      extra_food_per_week {\n        week_start_date\n        extra_food\n      }\n      \n      feeding_count_per_week {\n        week_start_date\n        feeding_count\n      }\n    }\n  }\n"]);return ye=function(){return e},e}var Oe=Y()(ye()),je=a(281),_e=a(145),ke=a.n(_e),we=a(144),xe=a.n(we),Ne=a(146),Ie=a.n(Ne),Ce=a(147),Se=a.n(Ce),$e=a(97),Te=Object(_.a)({green_chip:{backgroundColor:$e.green[100]},red_chip:{backgroundColor:$e.red[100]},blue_chip:{backgroundColor:$e.blue[100]}}),Le=function(e){var t=e.group,a=Te(),n=t.filter(function(e){return!e.isSuggested}),i=n.filter(function(e){return e.vitamin}),c=i.length>0?1e3*i[0].time:null,l=n[0],s=Object(f.c)(oe),u=Object(o.a)(s,2),m=u[0],d=u[1],p=d.loading;d.error;return p?r.a.createElement(je.a,{size:"small",label:"Vit D3",icon:r.a.createElement(xe.a,null),className:a.blue_chip}):r.a.createElement(je.a,{size:"small",label:"Vit D3 ".concat(c?"("+Object(L.a)(c,"HH:mm")+")":""),icon:c?r.a.createElement(ke.a,null):r.a.createElement(Ie.a,null),deleteIcon:r.a.createElement(Se.a,null),onDelete:!c&&l?function(){m({variables:{id:l.id,vitamin:!0}})}:null,className:c?a.green_chip:a.red_chip})},De=Object(_.a)(function(e){return{item:{opacity:.3},root:{backgroundColor:e.palette.background.paper},subheader:{backgroundColor:"#f0f2fa",color:e.palette.common.black,textAlign:"left"},subheader_total:{float:"right"},subheader_vitamin:{marginLeft:35},narrow_column:{flex:"initial",marginRight:35},source_column:{color:"#644889"},vitamin_column:{color:"#b17714"}}}),Fe={left:"L",right:"R",both:"LR",none:""},Be=function(e){var t=e.groupedEntries,a=Date.now(),n=De();return r.a.createElement(h.a,{disablePadding:!0,className:n.root},Object.entries(t).map(function(e){var t=Object(o.a)(e,2),i=t[0],c=t[1];return r.a.createElement(P.CSSTransitionGroup,{key:i,transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},r.a.createElement(C.a,{className:n.subheader},Object(L.a)(parseInt(i,10),"d MMM, yyyy"),r.a.createElement("span",{className:n.subheader_vitamin},r.a.createElement(Le,{group:c})),r.a.createElement("span",{className:n.subheader_total},"(total ",function(e){return e.filter(function(e){return!e.isSuggested}).length}(c),")")),c.map(function(e){var t=e.id,i=e.time,c=e.extra_food,o=e.type,s=e.vitamin,u=e.meantime,m=e.source,d=e.feeding_duration;return e.isSuggested?r.a.createElement(R,{key:t,time:i,className:n.item}):r.a.createElement(y.a,{key:t},r.a.createElement(J,{type:o,extra_food:c,feeding_duration:d}),r.a.createElement(O.a,{primaryTypographyProps:{variant:"body2"},secondary:u,className:n.narrow_column},B(1e3*i)),r.a.createElement(O.a,{className:[n.source_column,n.narrow_column].join(" ")},"bottle"!==o?Fe[m]:null),r.a.createElement(O.a,{primaryTypographyProps:{variant:"body2"},className:[n.vitamin_column,n.narrow_column].join(" ")},s?"Vit D3":""),r.a.createElement(I.a,null,a-1e3*i<864e5&&r.a.createElement(S.a,{edge:"end","aria-label":"Comments",component:l.b,to:"/edit/".concat(t)},r.a.createElement(T.a,null))))}))}))},Ae=a(150),ze=a.n(Ae),Pe=a(151),Me=a.n(Pe),Re=a(58),We=a(262),qe=Object(_.a)(function(e){return{info:{backgroundColor:e.palette.primary.main},error:{backgroundColor:e.palette.error.dark},messageBox:{marginBottom:20,position:"sticky",top:70,zIndex:10},message:{display:"flex",alignItems:"center"},icon:{marginRight:e.spacing(1)},completeFeedingButton:{color:"#ffe400",border:"1px solid #ffe400",fontSize:"smaller",marginTop:5},snackbarContent:{display:"flex",flexDirection:"column"}}}),He=function(e){var t=qe(),a=e.variant,n=e.action,i=e.children;return r.a.createElement(w.a,{className:[t[a],t.messageBox].join(" "),"aria-describedby":"client-snackbar",message:r.a.createElement("div",{className:t.snackbarContent},r.a.createElement("span",{id:"client-snackbar",className:t.message},"info"===a?r.a.createElement(ze.a,{className:t.icon}):r.a.createElement(Me.a,{className:t.icon}),i),r.a.createElement("span",null,n))})},Ge=function(e){var t=e.lastFeedingTime,a=e.nextFeedingTime,i=e.entry,c=Object(n.useState)(0),l=Object(o.a)(c,2),s=l[0],u=l[1];M(function(){u(s+1)},3e4);var m=qe(),d=Object(F.a)(new Date,new Date(t))>5?r.a.createElement(r.a.Fragment,null,"It's been\xa0",r.a.createElement(Re.a,{variant:"subtitle1",component:"span"},z(new Date,new Date(t))),"\xa0since last feeding "):r.a.createElement(r.a.Fragment,null,"Feeding in progress"),p=Object(f.c)(oe),g=Object(o.a)(p,1)[0],b=i?Object(F.a)(Date.now(),1e3*i.time):null,E=!i||"bottle"===i.type||i.feeding_duration||!b||b<5||b>30?null:r.a.createElement(We.a,{variant:"outlined",className:m.completeFeedingButton,size:"small",onClick:function(){g({variables:{id:i.id,feeding_duration:b}})}},"Complete now");return r.a.createElement(He,{class:"mui-fixed",variant:Date.now()>a?"error":"info",action:E},d)},Qe=a(283),Ve=a(263),Je=function(e){var t=e.id,a=e.breastFeedingSource,n=e.onChange,i=Object(f.c)(oe),c=Object(o.a)(i,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,{paragraph:!0},"Breast feeding source"),r.a.createElement(Qe.a,{value:a,exclusive:!0,onChange:function(e,a){c({variables:{id:t,source:a}}),n&&n(a)}},r.a.createElement(Ve.a,{value:"left"},"Left"),r.a.createElement(Ve.a,{value:"right"},"Right"),r.a.createElement(Ve.a,{value:"both"},"Both"),r.a.createElement(Ve.a,{value:"none"},"None")))},Xe=Object(_.a)(function(e){return{messageBox:{marginBottom:20,top:90,zIndex:10,backgroundColor:e.palette.text.hint,justifyContent:"center"},message:{display:"flex",alignItems:"center"}}}),Ue=function(e){var t=Xe();return r.a.createElement(w.a,{className:[t.messageBox].join(" "),"aria-describedby":"client-snackbar",message:r.a.createElement(Je,e)})},Ye=function(e){return r.a.createElement(Ue,e)},Ke=a(152),Ze=a(64),et=a(92),tt=Object(_.a)(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2},listWrapper:{marginTop:e.spacing(2)}}});var at=function(e){var t=e.match,a=e.showNextEstimatedFeeding,n=tt(),i=t.params.id,c=Object(f.d)(te,{variables:{spaceId:i}}),l=c.loading,s=c.data,u=c.error,p=c.refetch,_=!l&&!u,k=r.a.useCallback(function(){!1===document.hidden&&p()},[p]);Object(et.a)("visibilitychange",k,document);var w=Object(f.c)(ie,{refetchQueries:["getEntries"]}),x=Object(o.a)(w,2),I=x[0],C=x[1],S=C.loading,$=C.error,T=_&&s.entries.slice().reverse().reduce(function(e,t){if(e.length>0){var a=e[e.length-1];return[].concat(Object(d.a)(e),[Object(m.a)({},t,{meantime:z(new Date(1e3*t.time),new Date(1e3*a.time))})])}return[Object(m.a)({},t,{meantime:null})]},[]).reverse(),L=function(e){if(!e||e.length<1)return null;var t=e[0];return new Date(1e3*t.time)}(T),D=function(e){if(!e)return null;var t=e.getHours(),a=t>=21||t<3?210:150;return Object(Ze.a)(e,a)}(L);a&&D&&T.unshift({id:"future",time:Math.round(D.getTime()/1e3),extra_food:0,meantime:null,isSuggested:!0});var F=T&&T.reduce(function(e,t){var a=Object(Ke.a)(new Date(1e3*t.time)).getTime();return e[a]=e[a]||[],e[a].push(t),e},{});return r.a.createElement(r.a.Fragment,null,(u||$)&&r.a.createElement(N,{message:u||$}),r.a.createElement(E.a,{className:n.listWrapper,maxWidth:"sm"},r.a.createElement(v.a,{variant:"extended",color:"primary","aria-label":"delete",className:n.fab,onClick:function(){return I({variables:{time:Math.round(Date.now()/1e3),spaceId:i}})},disabled:S},r.a.createElement(g.a,null),"New feeding"),!l&&s&&L>0&&r.a.createElement(Ge,{lastFeedingTime:L.getTime(),nextFeedingTime:D.getTime(),entry:T&&T.length>0?T[0]:null}),!l&&s&&s.entries.length>0&&null===s.entries[0].source&&"bottle"!==s.entries[0].type&&r.a.createElement(Ye,{id:s.entries[0].id}),!l&&!u&&r.a.createElement(b.a,null,!l&&s&&s.entries.length>0&&r.a.createElement(Be,{groupedEntries:F}),!l&&s&&0===s.entries.length&&r.a.createElement(h.a,null,r.a.createElement(y.a,null,r.a.createElement(O.a,{primary:"Click the button 'New feeding' to start measuring intervals"})))),l&&r.a.createElement(j.a,null)))},nt=a(276),rt=a(267),it=function(e){var t=e.list;return r.a.createElement(h.a,{disablePadding:!0},r.a.createElement(P.CSSTransitionGroup,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},t.map(function(e){var t=e.id,a=e.time,n=e.message;return r.a.createElement(y.a,{key:t},r.a.createElement(O.a,{primaryTypographyProps:{variant:"body2"},secondary:"".concat(A(1e3*a)," ").concat(B(1e3*a))},n))})))},ct=Object(_.a)(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2},listWrapper:{marginTop:e.spacing(2)},form:{padding:"1em"}}});var ot=function(e){var t=e.match,a=ct(),n=r.a.useState(null),i=Object(o.a)(n,2),c=i[0],l=i[1],s=function(){l(null)},u=t.params.id,m=Object(f.d)(Z,{variables:{spaceId:u}}),d=m.loading,p=m.data,_=m.error,k=m.refetch,w=Object(f.c)(me,{refetchQueries:["getActivityLog"]}),x=Object(o.a)(w,2),I=x[0],C=x[1],S=C.loading,$=(C.error,!d&&!_),T=r.a.useCallback(function(){!1===document.hidden&&k()},[k]);Object(et.a)("visibilitychange",T,document);var L=$&&p.activity_log.slice(),D=function(e){return function(){return s(),I({variables:{time:Math.round(Date.now()/1e3),spaceId:u,message:e}})}};return r.a.createElement(r.a.Fragment,null,_&&r.a.createElement(N,{message:_}),r.a.createElement(E.a,{className:a.listWrapper,maxWidth:"sm"},r.a.createElement(v.a,{variant:"extended",color:"primary","aria-label":"delete",className:a.fab,onClick:function(e){l(e.currentTarget)},disabled:S},r.a.createElement(g.a,null),"New entry"),r.a.createElement(nt.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:s},r.a.createElement(rt.a,{onClick:D("Bobodent")},"Bobodent"),r.a.createElement(rt.a,{onClick:D("Ibufen")},"Ibufen"),r.a.createElement(rt.a,{onClick:D("Pedicetamol")},"Pedicetamol"),r.a.createElement(rt.a,{onClick:D("Espumisan")},"Espumisan")),!d&&!_&&r.a.createElement(b.a,null,!d&&p&&p.activity_log.length>0&&r.a.createElement(it,{list:L}),!d&&p&&0===p.activity_log.length&&r.a.createElement(h.a,null,r.a.createElement(y.a,null,r.a.createElement(O.a,{primary:"Click the button 'New entry' to create log entry"})))),d&&r.a.createElement(j.a,null)))},lt=a(66),st=a(114),ut=(a(211),Object(lt.makeStyles)(function(e){return{chartWrapper:{marginBottom:30}}})),mt=function(e){var t=e.type,a=e.data,i=e.title,c=e.options,o=e.responsiveOptions,l=ut(),s=r.a.createRef(),u=Object(n.useRef)(null);return Object(n.useEffect)(function(){switch(u.current&&u.current.detach(),t){case"line":u.current=st.Line(s.current,a,c,o);break;case"bar":u.current=st.Bar(s.current,a,c,o)}return function(){return u&&u.current.detach()}},[u,s,a,c,o]),r.a.createElement("div",{className:l.chartWrapper},r.a.createElement(Re.a,{variant:"h6"},i),r.a.createElement("div",{ref:s}))},dt=a(68),ft=a.n(dt),pt=Object(lt.makeStyles)(function(e){return{primaryChartLine:{stroke:"#3f51b5",fill:"#7986cb"},secondaryChartLine:{stroke:"#e91e63",fill:"#f06292"},menu:{textAlign:"right",margin:"20px 10px"},loader:{position:"absolute",top:"50%",left:"50%",marginLeft:"-20px",marginTop:"-20px"}}}),gt=function(e){var t=e.spaceId,a=Object(n.useState)(null),i=Object(o.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(null),u=Object(o.a)(s,2),m=u[0],d=u[1],p=pt(),g=function(e){switch(e){case"week":return 7;case"month":return 30;case"quarter":return 90;default:return 30}},b=Object(f.d)(Ee,{fetchPolicy:"cache-and-network",variables:{spaceId:t,daysAgo:g(m)}}),E=b.loading,v=b.data,h=(b.error,Object(f.b)(he,{fetchPolicy:"cache-and-network",variables:{spaceId:t,daysAgo:g(m)}})),y=Object(o.a)(h,2),O=y[0],_=y[1],k=_.loading,w=_.data;_.error;if(!v||k||w||O(),!v)return r.a.createElement("div",null,r.a.createElement(j.a,null));var x={labels:v.stats.extra_food_per_day.map(function(e){return e.date}),series:[{data:v.stats.extra_food_per_day.map(function(e){return e.extra_food}),className:p.primaryChartLine}]},N={labels:v.stats.feeding_count_per_day.map(function(e){return e.date}),series:[{data:v.stats.feeding_count_per_day.map(function(e){return e.feeding_count}),className:p.primaryChartLine}]},I=function(e){return(Math.round(e/60*10)/10).toFixed(2)},C=w?{labels:w.stats.night_breaks.map(function(e){return e.date}),series:[{data:w.stats.night_breaks.map(function(e){var t=e.firstBreakDurationInMins;return I(t)}),className:p.primaryChartLine},{data:w.stats.night_breaks.map(function(e){var t=e.secondBreakDurationInMins;return I(t)}),className:p.secondaryChartLine}]}:null,S=w?{labels:w.stats.average_day_break.map(function(e){return e.date}),series:[{data:w.stats.average_day_break.map(function(e){var t=e.average_duration_mins;return I(t)}),className:p.primaryChartLine}]}:null,$=function(e){return function(t,a){return a%e===0?t.split("/").slice(0,2).join("/"):""}},T=function(e){return{showArea:!0,showPoint:!1,low:0,axisY:{labelInterpolationFnc:function(t){return"".concat(t).concat(e)},onlyInteger:!0},axisX:{labelInterpolationFnc:$(7)}}},L=[["screen and (min-width: 640px)",{showPoint:!0,axisX:{labelInterpolationFnc:$(3)}}]],D=function(e){e&&d(e),l(null)};return r.a.createElement("div",null,r.a.createElement("div",{className:p.menu},r.a.createElement(We.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)}},"Select dates",r.a.createElement(ft.a,null)),r.a.createElement(nt.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:D},r.a.createElement(rt.a,{onClick:D.bind(void 0,"week")},"Last week"),r.a.createElement(rt.a,{onClick:D.bind(void 0,"month")},"Last month"),r.a.createElement(rt.a,{onClick:D.bind(void 0,"quarter")},"Last quarter"))),r.a.createElement("div",{style:{height:30}},E&&r.a.createElement(j.a,{size:20})),r.a.createElement(mt,{type:"line",data:x,title:"Extra food",options:T("ml"),responsiveOptions:L}),r.a.createElement(mt,{type:"line",data:N,title:"Feeding count",options:T(""),responsiveOptions:L}),r.a.createElement("div",{style:{position:"relative"}},!C&&r.a.createElement(j.a,{className:p.loader}),r.a.createElement(mt,{type:"line",data:C,title:"Night break duration",options:T("h"),responsiveOptions:L})),r.a.createElement("div",{style:{position:"relative"}},!S&&r.a.createElement(j.a,{className:p.loader}),r.a.createElement(mt,{type:"line",data:S,title:"Average day break",options:T("h"),responsiveOptions:L})))},bt=Object(lt.makeStyles)(function(e){return{primaryChartLine:{stroke:"#ff5722",fill:"#ff8a65"},secondaryChartLine:{stroke:"#ffeb3b",fill:"#fff176"}}}),Et=function(e){var t=e.spaceId,a=bt(),n=Object(f.d)(Oe,{fetchPolicy:"cache-and-network",variables:{spaceId:t}}),i=n.loading,c=n.data;n.error;if(!c)return r.a.createElement("div",null,r.a.createElement(j.a,null));var o={labels:c.aggregated_stats.extra_food_per_week.map(function(e){return e.week_start_date}),series:[{data:c.aggregated_stats.extra_food_per_week.map(function(e){return e.extra_food}),className:a.primaryChartLine}]},l={labels:c.aggregated_stats.feeding_count_per_week.map(function(e){return e.week_start_date}),series:[{data:c.aggregated_stats.feeding_count_per_week.map(function(e){return e.feeding_count}),className:a.primaryChartLine}]},s=function(e){return function(t,a){return a%e===0?t.split("/").slice(0,2).join("/"):""}},u=function(e){return{showArea:!0,showPoint:!1,low:0,axisY:{labelInterpolationFnc:function(t){return"".concat(t).concat(e)},onlyInteger:!0},axisX:{labelInterpolationFnc:s(2)}}},m=[["screen and (min-width: 640px)",{showPoint:!0,axisX:{labelInterpolationFnc:s(1)}}]];return r.a.createElement("div",null,r.a.createElement("div",{style:{height:30}},i&&r.a.createElement(j.a,{size:20})),r.a.createElement(mt,{type:"bar",data:o,title:"Extra food per week",options:u("ml"),responsiveOptions:m}),r.a.createElement(mt,{type:"bar",data:l,title:"Feeding count per week",options:u(""),responsiveOptions:m}))},vt=a(277),ht=a(270),yt=a(268),Ot=a(269),jt=a(231),_t=a(275),kt=r.a.createContext(null),wt=function(e){return{pattern:e,path:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return s.f.apply(void 0,[e].concat(a))}}},xt=wt("/"),Nt=wt("/select"),It=wt("/space/:id/:tab(log|stats|aggregated)?"),Ct=wt("/edit/:id"),St=Object(_.a)({appBar:{backgroundColor:"#3e4451"},avatar:{margin:15,width:40,height:40,marginLeft:"auto"},toolbar:{height:70,paddingLeft:15}}),$t=function(e){var t=e.toolbarIcon,a=e.children,i=St(),c=Object(n.useContext)(kt),s=r.a.useState(null),u=Object(o.a)(s,2),m=u[0],d=u[1];function f(){d(null)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt.a,{className:i.appBar},r.a.createElement(Ot.a,{disableGutters:!0,className:i.toolbar},t,r.a.createElement(Re.a,{variant:"h5"},"Food time"),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(jt.a,{alt:"Profile picture",src:c.imageUrl,"aria-controls":"user-menu","aria-haspopup":"true",className:i.avatar,onClick:function(e){d(e.currentTarget)}}),r.a.createElement(nt.a,{id:"user-menu",anchorEl:m,anchorOrigin:{vertical:"bottom",horizontal:"right"},getContentAnchorEl:null,keepMounted:!0,open:Boolean(m),onClose:f},r.a.createElement(rt.a,{component:l.b,to:Nt.path(),onClick:f},"Spaces"))))),r.a.createElement(Ot.a,{className:i.toolbar}),r.a.createElement(_t.a,{my:2},a))},Tt=function(e){var t=e.match,a=e.history,n=t.params.tab||"list";return r.a.createElement($t,null,r.a.createElement(vt.a,{value:n,onChange:function(e,n){a.push(Object(s.f)(t.path,Object(m.a)({},t.params,{tab:"list"===n?void 0:n})))}},r.a.createElement(ht.a,{value:"list",label:"List"}),r.a.createElement(ht.a,{value:"log",label:"Log"}),r.a.createElement(ht.a,{value:"stats",label:"Stats"}),r.a.createElement(ht.a,{value:"aggregated",label:"Aggregated"})),"list"===n&&r.a.createElement(at,e),"log"===n&&r.a.createElement(ot,e),"stats"===n&&r.a.createElement(gt,{spaceId:t.params.id}),"aggregated"===n&&r.a.createElement(Et,{spaceId:t.params.id}))},Lt=Object(_.a)(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2}}});var Dt=function(){var e=Lt(),t=Object(f.d)(fe),a=t.loading,n=t.data,i=(t.error,Object(f.c)(ge,{variables:{name:"New space"},refetchQueries:["getSpaces"]})),c=Object(o.a)(i,2),s=c[0],u=c[1],m=u.loading;return u.error,r.a.createElement($t,null,r.a.createElement(E.a,{maxWidth:"sm"},r.a.createElement(v.a,{variant:"extended",color:"primary","aria-label":"New space",className:e.fab,onClick:s,disabled:m},r.a.createElement(g.a,null),"New space"),a&&r.a.createElement(j.a,null),!a&&r.a.createElement(b.a,null,r.a.createElement(h.a,{disablePadding:!0},r.a.createElement(P.CSSTransitionGroup,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},n.spaces.map(function(e){return r.a.createElement(y.a,{key:e.id,divider:!0,button:!0,component:l.b,to:It.path({id:e.id})},r.a.createElement(O.a,null,e.display_name))}))))))},Ft=a(153),Bt=Object(_.a)({root:{position:"relative",minHeight:40},loader:{position:"absolute",backgroundColor:"white",top:-3,bottom:-5,left:0,right:0,zIndex:1}}),At=function(e){var t=e.onLogin,a=Bt(),i=function(e){t(e)},c=Object(n.useState)(!0),l=Object(o.a)(c,2),s=l[0],u=l[1];return Object(n.useEffect)(function(){var e=setTimeout(function(){u(!1)},1500);return function(){return clearTimeout(e)}}),r.a.createElement($t,null,r.a.createElement("div",{className:a.root},s&&r.a.createElement("div",{className:a.loader},r.a.createElement(j.a,null)),r.a.createElement(Ft.GoogleLogin,{clientId:"299114443733-g59vv11262camtp97hiv99sjh0qr3b9i.apps.googleusercontent.com",buttonText:"Login",onSuccess:i,onFailure:i,isSignedIn:!0,cookiePolicy:"single_host_origin"})))},zt=a(157),Pt=a.n(zt),Mt=a(155),Rt=a(154),Wt=a(94),qt=a(95),Ht=a(156),Gt=a(272),Qt=a(282),Vt=a(98),Jt=a.n(Vt),Xt=a(273),Ut=a(278),Yt=a(271);function Kt(e){var t=null,a=!1;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];a?t=function(){return e.apply(void 0,r)}:function e(n){a=!0,n().then(function(){if(a=!1,null!=t){var n=t;t=null,e(n)}})}(function(){return e.apply(void 0,r)})}}var Zt=Object(_.a)(function(e){return Object(Yt.a)({root:{padding:e.spacing(3,5)},dateTime:{display:"flex",flexDirection:"column"},date:{marginLeft:20},arrow:{color:"#808edc",minWidth:"initial"},dateTimeBar:{display:"flex",flexDirection:"row",padding:10}})}),ea=function(e,t,a){var n=null;try{n=e.readQuery({query:te,variables:{spaceId:t}})}catch(r){}n&&e.writeQuery({query:te,variables:{spaceId:t},data:{entries:a(n.entries)}})};var ta=function(e){var t=e.match,a=e.data,i=t.params.id,c=a.entry.spaceId,l=Object(f.c)(se,{variables:{id:i},update:function(e,t){var a=t.data.removeEntry;ea(e,c,function(e){return e.filter(function(e){return e.id!==a.removedId})})}}),u=Object(o.a)(l,2),d=u[0],p=u[1].data,g=Object(n.useState)(new Date(1e3*a.entry.time)),v=Object(o.a)(g,2),h=v[0],y=v[1],O=Object(n.useState)(a.entry.extra_food),j=Object(o.a)(O,2),_=j[0],k=j[1],w=Object(n.useState)("bottle"===a.entry.type),x=Object(o.a)(w,2),N=x[0],I=x[1],C=Object(n.useState)(a.entry.source),S=Object(o.a)(C,2),$=S[0],T=S[1],D=Object(n.useState)(a.entry.vitamin),F=Object(o.a)(D,2),B=F[0],z=F[1],P=Object(n.useState)(a.entry.feeding_duration),M=Object(o.a)(P,2),R=M[0],W=M[1],q=Object(f.a)(),H=Object(n.useCallback)(Kt(function(e){return q.mutate({mutation:oe,variables:Object(m.a)({id:i},e),update:function(e){ea(e,c,function(e){return e.sort(function(e,t){return t.time-e.time})})}})}),[q,i]),G=function(e){y(e),H({time:Math.round(e.getTime()/1e3)})},Q=function(e,t){return 0===e?"breast":t?"bottle":"mixed"},V=Zt();if(p)return r.a.createElement(s.a,{to:It.path({id:c})});var J,X=N?null:r.a.createElement(Gt.a,{item:!0,xs:12,md:12},r.a.createElement(b.a,{className:V.root},r.a.createElement(Je,{id:i,breastFeedingSource:$,onChange:function(e){T(e)}}))),U=N?null:r.a.createElement(Gt.a,{item:!0,xs:12,md:12},r.a.createElement(b.a,{className:V.root},r.a.createElement(Re.a,{paragraph:!0},"Feeding duration - ",R,"min"),r.a.createElement(Qt.a,{defaultValue:R,valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:30,onChange:function(e,t){return function(e){W(e),H({feeding_duration:e})}(t)}})));return r.a.createElement("header",null,r.a.createElement("div",{className:["App-header",V.dateTimeBar].join(" ")},r.a.createElement("div",{className:V.dateTime},r.a.createElement(We.a,{className:V.arrow,onClick:function(){return G(Object(Wt.a)(h,1))}},r.a.createElement(Jt.a,null)),r.a.createElement(Re.a,{variant:"h5"},r.a.createElement("span",null,(J=h,Object(L.a)(new Date(J),"HH")))),r.a.createElement(We.a,{className:V.arrow,onClick:function(){return G(Object(Rt.a)(h,1))}},r.a.createElement(ft.a,null))),":",r.a.createElement("div",{className:V.dateTime},r.a.createElement(We.a,{className:V.arrow,onClick:function(){return G(Object(Ze.a)(h,5))}},r.a.createElement(Jt.a,null)),r.a.createElement(Re.a,{variant:"h5"},r.a.createElement("span",null,function(e){return Object(L.a)(new Date(e),"mm")}(h))),r.a.createElement(We.a,{className:V.arrow,onClick:function(){return G(Object(Mt.a)(h,5))}},r.a.createElement(ft.a,null))),r.a.createElement("div",{className:[V.dateTime,V.date].join(" ")},r.a.createElement(We.a,{className:V.arrow,onClick:function(){return G(Object(qt.a)(h,1))}},r.a.createElement(Jt.a,null)),r.a.createElement(Re.a,{variant:"h6"},r.a.createElement("span",null,A(h))),r.a.createElement(We.a,{className:V.arrow,onClick:function(){return G(Object(Ht.a)(h,1))}},r.a.createElement(ft.a,null)))),r.a.createElement(E.a,{maxWidth:"sm"},r.a.createElement(Gt.a,{container:!0,spacing:2,direction:"row",justify:"center"},r.a.createElement(Gt.a,{item:!0,xs:12,md:12},r.a.createElement(b.a,{className:V.root},r.a.createElement(Re.a,{paragraph:!0},"Extra food - ",_,"ml"),r.a.createElement(Qt.a,{defaultValue:_,valueLabelDisplay:"off",step:5,min:0,max:250,onChange:function(e,t){return function(e){k(e),I(!0),H({extra_food:e,type:Q(e,!0)})}(t)}}))),r.a.createElement(Gt.a,{item:!0,xs:12,md:12},r.a.createElement(b.a,{className:V.root},r.a.createElement(Xt.a,{control:r.a.createElement(Ut.a,{checked:N,onChange:function(e){var t=e.target.checked;I(t);var a=Q(_,t);H({type:a})},color:"primary"}),label:"Bottle only"}))),U,X,r.a.createElement(Gt.a,{item:!0,xs:12,md:12},r.a.createElement(b.a,{className:V.root},r.a.createElement(Re.a,{paragraph:!0},"Got vitamin?"),r.a.createElement(Qe.a,{value:B?"1":"0",exclusive:!0,onChange:function(e,t){z("1"===t),H({vitamin:"1"===t})}},r.a.createElement(Ve.a,{value:"1"},"Yes"),r.a.createElement(Ve.a,{value:"0"},"No")))),r.a.createElement(Gt.a,{item:!0,xs:12,md:12},r.a.createElement(b.a,{className:V.root},r.a.createElement(Re.a,{paragraph:!0},"Danger zone"),r.a.createElement(We.a,{variant:"contained",color:"secondary",onClick:d},"Delete"))))))};var aa=function(e){var t=e.match,a=t.params.id,n=Object(f.d)(ne,{variables:{id:a}}),i=n.loading,c=n.data,o=c&&c.entry.spaceId,s=o&&r.a.createElement(S.a,{edge:"start",color:"inherit",component:r.a.forwardRef(function(e,t){return r.a.createElement(l.b,Object.assign({},e,{ref:t,to:It.path({id:o})}))})},r.a.createElement(Pt.a,null));return r.a.createElement($t,{toolbarIcon:s},i?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"}),r.a.createElement(E.a,{maxWidth:"sm"},r.a.createElement(j.a,null))):r.a.createElement(ta,{data:c,match:t}))},na=a(274),ra=Object(_.a)(function(e){return Object(Yt.a)({root:{padding:e.spacing(5,2)}})}),ia=function(){var e=ra();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},"ERROR 404"),r.a.createElement(E.a,{className:e.root,maxWidth:"sm"},r.a.createElement(Re.a,{variant:"h5",paragraph:!0},"NOT FOUND"),r.a.createElement(Re.a,{variant:"body"},"Go back to the ",r.a.createElement(na.a,{to:"/",component:l.b},"homepage"))))},ca=Object(s.h)(function(e){var t=e.children,a=e.location.pathname;return Object(n.useEffect)(function(){window.scrollTo(0,0)},[a]),t||null}),oa=a(53),la=a(163),sa=a(161),ua=a(158),ma=a(159),da=a(164),fa=a(160),pa=a(165),ga=a(28),ba=function(e){function t(e,a){var n;return Object(ua.a)(this,t),(n=Object(da.a)(this,Object(fa.a)(t).call(this))).token=a,n.user=e,n}return Object(pa.a)(t,e),Object(ma.a)(t,[{key:"setTokenHeader",value:function(e){e.setContext({headers:{authorization:"Bearer ".concat(this.token)}})}},{key:"refreshToken",value:function(){var e=this;return new Promise(function(t){e.user.reloadAuthResponse().then(function(a){e.token=a.id_token,t(!0)})})}},{key:"request",value:function(e,t){var a=this;return this.setTokenHeader(e),new ga.a(function(n){var r,i;try{r=t(e).subscribe({next:n.next.bind(n),complete:n.complete.bind(n),error:function(r){400===r.statusCode?a.refreshToken().then(function(r){r?(a.setTokenHeader(e),i=t(e).subscribe(n)):n.error(new Error("refreshing token failed"))}):n.error(r)}})}catch(c){n.error(c)}return function(){r&&r.unsubscribe(),i&&i.unsubscribe()}})}}]),t}(a(42).a);function Ea(e){var t=Object(la.a)({uri:"https://papi.ertrzyiks.me/food-time"}),a=new ba(e,e.tokenId);return new oa.a({cache:new sa.a({cacheRedirects:{Query:{entry:function(e,t,a){return(0,a.getCacheKey)({__typename:"Entry",id:t.id})}}}}),link:a.concat(t)})}a(232);var va=function(e){var t=e.match,a=e.write,r=e.children,i=t.params.id;return Object(n.useEffect)(function(){a(i)},[a,i]),r};var ha=function(e){var t=e.storage,a=t.read,i=t.write,c=a("food-time-space-id"),m=Object(n.useState)(null),d=Object(o.a)(m,2),f=d[0],p=d[1];return r.a.createElement(kt.Provider,{value:f&&f.profileObj},r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(ca,null),r.a.createElement(s.d,null,f?r.a.createElement(u.a,{client:Ea(f)},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:Nt.pattern,render:function(e){return r.a.createElement(Dt,e)}}),r.a.createElement(s.b,{path:It.pattern,render:function(e){return r.a.createElement(va,{write:function(e){return i("food-time-space-id",e)},match:e.match},r.a.createElement(Tt,e))}}),r.a.createElement(s.b,{path:Ct.pattern,render:function(e){return r.a.createElement(aa,e)}}),r.a.createElement(s.b,{exact:!0,path:xt.pattern},c?r.a.createElement(s.a,{to:It.path({id:c})}):r.a.createElement(s.a,{to:Nt.path()})))):r.a.createElement(s.b,{path:xt.pattern,render:function(e){return r.a.createElement(At,Object.assign({},e,{onLogin:function(e){p(e)}}))}}),r.a.createElement(s.b,{component:ia})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ha,{storage:{read:function(e){return JSON.parse(window.localStorage.getItem(e))},write:function(e,t){return window.localStorage.setItem(e,JSON.stringify(t))}}}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},92:function(e,t,a){"use strict";(function(e){var n=a(0),r=a.n(n);t.a=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=r.a.useRef();r.a.useEffect(function(){i.current=a},[a]),r.a.useEffect(function(){if(n&&n.addEventListener){var e=function(e){return i.current(e)};return n.addEventListener(t,e),function(){n.removeEventListener(t,e)}}},[t,n])}}).call(this,a(70))}},[[174,1,2]]]);
//# sourceMappingURL=main.3a229750.chunk.js.map