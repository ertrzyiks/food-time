(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){"use strict";(function(e){var n=a(0),r=a.n(n);t.a=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,c=r.a.useRef();r.a.useEffect(function(){c.current=a},[a]),r.a.useEffect(function(){if(n&&n.addEventListener){var e=function(e){return c.current(e)};return n.addEventListener(t,e),function(){n.removeEventListener(t,e)}}},[t,n])}}).call(this,a(62))},138:function(e,t,a){e.exports=a(184)},143:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c),o=(a(143),a(12)),l=a(31),u=a(43),m=a(29),s=a(50),d=a(124),f=a(20),p=a(74),b=a.n(p),E=a(128),g=a(224),v=a(225),h=a(218),j=a(186),O=a(216),y=a(226),w=a(214),x=a(240),k=a(215),_=Object(w.a)(function(e){return{error:{backgroundColor:e.palette.error.dark}}}),N=function(e){var t=e.message,a=Object(n.useState)(!0),c=Object(o.a)(a,2),i=c[0],l=c[1],u=_();if(!t)return null;function m(e,t){"clickaway"!==t&&l(!1)}return t.networkError&&t.networkError.result&&t.networkError.result.errors&&t.networkError.result.errors.length>0&&(t=t.networkError.result.errors[0].message.slice(0,100)),r.a.createElement(x.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:6e3,onClose:m,open:i},r.a.createElement(k.a,{className:u.error,message:t.toString(),onClose:m}))},C=a(220),I=a(219),S=a(221),T=a(109),D=a.n(T),$=a(45),F=a(99),B=a(64);function L(e){return Object($.a)(new Date(e),"HH:mm")}function z(e,t){var a=Object(F.a)(e,t),n=Object(B.a)(e,t)%60;return a<1?"".concat(n,"min"):"".concat(a,"h ").concat(n,"min")}var R=a(70);function H(e,t){var a=Object(n.useRef)();Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}var A=function(e){var t=e.time,a=e.key,c=e.className,i=Object(n.useState)(0),l=Object(o.a)(i,2),u=l[0],m=l[1];H(function(){m(u+1)},15e3);var s=Date.now(),d=new Date(1e3*t);return r.a.createElement(j.a,{key:a,className:c},r.a.createElement(O.a,{primary:"Next at ".concat(L(d)),secondary:d>s&&z(d,s)}))},M=a(217),W=a(84),P=a.n(W),q=a(83),G=a.n(q),Q=Object(w.a)({icon_wrapper:{display:"flex",flexDirection:"column",fontSize:12,marginRight:5,textAlign:"center"},bottle_icon:{color:"#24a0ff"},icon_container:{display:"flex"},small_icon:{fontSize:"1rem"}}),V=function(e){var t,a=e.type,n=e.extra_food,c=e.feeding_duration,i=Q(),o=c?r.a.createElement("span",null,c,"'"):null;switch(a){case"breast":t=r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,null),o);break;case"bottle":t=r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:i.bottle_icon})," ",n,"ml");break;case"mixed":t=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i.icon_container},r.a.createElement(G.a,{className:i.small_icon}),r.a.createElement(P.a,{className:[i.bottle_icon,i.small_icon].join(" ")})),r.a.createElement("span",null,n,"ml"),o)}return r.a.createElement(M.a,null,r.a.createElement("div",{className:i.icon_wrapper},t))},J=a(25),U=a(26),X=a.n(U);function Y(){var e=Object(J.a)(["\n  query getEntries($spaceId: String!) {\n    entries(spaceId: $spaceId) {\n      id\n      time\n      extra_food\n      spaceId\n      type  \n      vitamin\n      source\n      feeding_duration\n    }\n  }\n"]);return Y=function(){return e},e}var K=X()(Y());function Z(){var e=Object(J.a)(["\n  query getEntry($id: String!) {\n    entry(id: $id) {\n      id\n      time\n      extra_food\n      spaceId\n      type \n      vitamin\n      source\n      feeding_duration\n    }\n  }\n"]);return Z=function(){return e},e}var ee=X()(Z());function te(){var e=Object(J.a)(["\n  mutation CreateEntry($spaceId: String!, $time: Int!) {\n    createEntry(spaceId: $spaceId, time: $time) {\n      id\n      time\n      extra_food\n      type  \n      vitamin\n      source\n      feeding_duration\n    }\n  }\n"]);return te=function(){return e},e}var ae=X()(te());function ne(){var e=Object(J.a)(["\n  mutation UpdateEntry($id: String!, $time: Int, $extra_food: Int, $type: String, $vitamin: Boolean, $source: String, $feeding_duration: Int) {\n    updateEntry(id: $id, time: $time, extra_food: $extra_food, type: $type, vitamin: $vitamin, source: $source, feeding_duration: $feeding_duration) {\n      id\n      time\n      extra_food\n      type  \n      vitamin\n      source\n      feeding_duration\n    }\n  }\n"]);return ne=function(){return e},e}var re=X()(ne());function ce(){var e=Object(J.a)(["\n  mutation RemoveEntry($id: String!) {\n    removeEntry(id: $id) {\n      message\n      removedId\n    }\n  }\n"]);return ce=function(){return e},e}var ie=X()(ce());function oe(){var e=Object(J.a)(["\n  query getSpaces {\n    spaces {\n      id\n      display_name\n    }\n  }\n"]);return oe=function(){return e},e}var le=X()(oe());function ue(){var e=Object(J.a)(["\n  mutation CreateSpace($name: String!) {\n    createSpace(name: $name) {\n      id\n      display_name\n    }\n  }\n"]);return ue=function(){return e},e}var me=X()(ue());function se(){var e=Object(J.a)(["\n  query getStats($spaceId: String!) {\n    stats(spaceId: $spaceId) {\n      extra_food_per_day {\n        date\n        extra_food\n      }\n    }\n  }\n"]);return se=function(){return e},e}var de=X()(se()),fe=a(241),pe=a(105),be=a.n(pe),Ee=a(104),ge=a.n(Ee),ve=a(106),he=a.n(ve),je=a(107),Oe=a.n(je),ye=a(77),we=Object(w.a)({green_chip:{backgroundColor:ye.green[100]},red_chip:{backgroundColor:ye.red[100]},blue_chip:{backgroundColor:ye.blue[100]}}),xe=function(e){var t=e.group,a=we(),n=t.filter(function(e){return!e.isSuggested}),c=n.filter(function(e){return e.vitamin}),i=c.length>0?1e3*c[0].time:null,l=n[0],u=Object(f.b)(re),m=Object(o.a)(u,2),s=m[0],d=m[1],p=d.loading;d.error;return p?r.a.createElement(fe.a,{size:"small",label:"Vit D3",icon:r.a.createElement(ge.a,null),className:a.blue_chip}):r.a.createElement(fe.a,{size:"small",label:"Vit D3 ".concat(i?"("+Object($.a)(i,"HH:mm")+")":""),icon:i?r.a.createElement(be.a,null):r.a.createElement(he.a,null),deleteIcon:r.a.createElement(Oe.a,null),onDelete:!i&&l?function(){s({variables:{id:l.id,vitamin:!0}})}:null,className:i?a.green_chip:a.red_chip})},ke=Object(w.a)(function(e){return{item:{opacity:.3},root:{backgroundColor:e.palette.background.paper},subheader:{backgroundColor:"#f0f2fa",color:e.palette.common.black,textAlign:"left"},subheader_total:{float:"right"},subheader_vitamin:{marginLeft:35},narrow_column:{flex:"initial",marginRight:35},source_column:{color:"#644889"},vitamin_column:{color:"#b17714"}}}),_e={left:"L",right:"R",both:"LR",none:""},Ne=function(e){var t=e.groupedEntries,a=Date.now(),n=ke();return r.a.createElement(h.a,{disablePadding:!0,className:n.root},Object.entries(t).map(function(e){var t=Object(o.a)(e,2),c=t[0],i=t[1];return r.a.createElement(R.CSSTransitionGroup,{key:c,transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},r.a.createElement(I.a,{className:n.subheader},Object($.a)(parseInt(c,10),"d MMM, yyyy"),r.a.createElement("span",{className:n.subheader_vitamin},r.a.createElement(xe,{group:i})),r.a.createElement("span",{className:n.subheader_total},"(total ",function(e){return e.filter(function(e){return!e.isSuggested}).length}(i),")")),i.map(function(e){var t=e.id,c=e.time,i=e.extra_food,o=e.type,u=e.vitamin,m=e.meantime,s=e.source,d=e.feeding_duration;return e.isSuggested?r.a.createElement(A,{key:t,time:c,className:n.item}):r.a.createElement(j.a,{key:t},r.a.createElement(V,{type:o,extra_food:i,feeding_duration:d}),r.a.createElement(O.a,{secondary:m,className:n.narrow_column},L(1e3*c)),r.a.createElement(O.a,{className:[n.source_column,n.narrow_column].join(" ")},"bottle"!==o?_e[s]:null),r.a.createElement(O.a,{className:[n.vitamin_column,n.narrow_column].join(" ")},u?"Vit D3":""),r.a.createElement(C.a,null,a-1e3*c<864e5&&r.a.createElement(S.a,{edge:"end","aria-label":"Comments",component:l.b,to:"/edit/".concat(t)},r.a.createElement(D.a,null))))}))}))},Ce=a(110),Ie=a.n(Ce),Se=a(111),Te=a.n(Se),De=a(52),$e=a(222),Fe=Object(w.a)(function(e){return{info:{backgroundColor:e.palette.primary.main},error:{backgroundColor:e.palette.error.dark},messageBox:{marginBottom:20,position:"sticky",top:70,zIndex:10},message:{display:"flex",alignItems:"center"},icon:{marginRight:e.spacing(1)},completeFeedingButton:{color:"#ffe400",border:"1px solid #ffe400",fontSize:"smaller",marginTop:5},snackbarContent:{display:"flex",flexDirection:"column"}}}),Be=function(e){var t=Fe(),a=e.variant,n=e.action,c=e.children;return r.a.createElement(k.a,{className:[t[a],t.messageBox].join(" "),"aria-describedby":"client-snackbar",message:r.a.createElement("div",{className:t.snackbarContent},r.a.createElement("span",{id:"client-snackbar",className:t.message},"info"===a?r.a.createElement(Ie.a,{className:t.icon}):r.a.createElement(Te.a,{className:t.icon}),c),r.a.createElement("span",null,n))})},Le=function(e){var t=e.lastFeedingTime,a=e.nextFeedingTime,c=e.entry,i=Object(n.useState)(0),l=Object(o.a)(i,2),u=l[0],m=l[1];H(function(){m(u+1)},3e4);var s=Fe(),d=Object(B.a)(new Date,new Date(t))>5?r.a.createElement(r.a.Fragment,null,"It's been\xa0",r.a.createElement(De.a,{variant:"subtitle1",component:"span"},z(new Date,new Date(t))),"\xa0since last feeding "):r.a.createElement(r.a.Fragment,null,"Feeding in progress"),p=Object(f.b)(re),b=Object(o.a)(p,1)[0],E=c?Object(B.a)(Date.now(),1e3*c.time):null,g=!c||"bottle"===c.type||c.feeding_duration||!E||E<5||E>30?null:r.a.createElement($e.a,{variant:"outlined",className:s.completeFeedingButton,size:"small",onClick:function(){b({variables:{id:c.id,feeding_duration:E}})}},"Complete now");return r.a.createElement(Be,{class:"mui-fixed",variant:Date.now()>a?"error":"info",action:g},d)},ze=a(243),Re=a(223),He=function(e){var t=e.id,a=e.breastFeedingSource,n=e.onChange,c=Object(f.b)(re),i=Object(o.a)(c,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{paragraph:!0},"Breast feeding source"),r.a.createElement(ze.a,{value:a,exclusive:!0,onChange:function(e,a){i({variables:{id:t,source:a}}),n&&n(a)}},r.a.createElement(Re.a,{value:"left"},"Left"),r.a.createElement(Re.a,{value:"right"},"Right"),r.a.createElement(Re.a,{value:"both"},"Both"),r.a.createElement(Re.a,{value:"none"},"None")))},Ae=Object(w.a)(function(e){return{messageBox:{marginBottom:20,top:90,zIndex:10,backgroundColor:e.palette.text.hint,justifyContent:"center"},message:{display:"flex",alignItems:"center"}}}),Me=function(e){var t=Ae();return r.a.createElement(k.a,{className:[t.messageBox].join(" "),"aria-describedby":"client-snackbar",message:r.a.createElement(He,e)})},We=function(e){return r.a.createElement(Me,e)},Pe=a(113),qe=a(57),Ge=a(112),Qe=Object(w.a)(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2},listWrapper:{marginTop:e.spacing(2)}}});var Ve=function(e){var t=e.match,a=e.showNextEstimatedFeeding,n=Qe(),c=t.params.id,i=Object(f.c)(K,{variables:{spaceId:c}}),l=i.loading,u=i.data,m=i.error,p=i.refetch,w=!l&&!m,x=r.a.useCallback(function(){!1===document.hidden&&p()},[p]);Object(Ge.a)("visibilitychange",x,document);var k=Object(f.b)(ae,{refetchQueries:["getEntries"]}),_=Object(o.a)(k,2),C=_[0],I=_[1],S=I.loading,T=I.error,D=w&&u.entries.slice().reverse().reduce(function(e,t){if(e.length>0){var a=e[e.length-1];return[].concat(Object(d.a)(e),[Object(s.a)({},t,{meantime:z(new Date(1e3*t.time),new Date(1e3*a.time))})])}return[Object(s.a)({},t,{meantime:null})]},[]).reverse(),$=function(e){if(!e||e.length<1)return null;var t=e[0];return new Date(1e3*t.time)}(D),F=function(e){if(!e)return null;var t=e.getHours(),a=t>=21||t<3?210:150;return Object(qe.a)(e,a)}($);a&&F&&D.unshift({id:"future",time:Math.round(F.getTime()/1e3),extra_food:0,meantime:null,isSuggested:!0});var B=D&&D.reduce(function(e,t){var a=Object(Pe.a)(new Date(1e3*t.time)).getTime();return e[a]=e[a]||[],e[a].push(t),e},{});return r.a.createElement(r.a.Fragment,null,(m||T)&&r.a.createElement(N,{message:m||T}),r.a.createElement(g.a,{className:n.listWrapper,maxWidth:"sm"},r.a.createElement(v.a,{variant:"extended",color:"primary","aria-label":"delete",className:n.fab,onClick:function(){return C({variables:{time:Math.round(Date.now()/1e3),spaceId:c}})},disabled:S},r.a.createElement(b.a,null),"New feeding"),!l&&u&&$>0&&r.a.createElement(Le,{lastFeedingTime:$.getTime(),nextFeedingTime:F.getTime(),entry:D&&D.length>0?D[0]:null}),!l&&u&&u.entries.length>0&&null===u.entries[0].source&&"bottle"!==u.entries[0].type&&r.a.createElement(We,{id:u.entries[0].id}),!l&&!m&&r.a.createElement(E.a,null,!l&&u&&u.entries.length>0&&r.a.createElement(Ne,{groupedEntries:B}),!l&&u&&0===u.entries.length&&r.a.createElement(h.a,null,r.a.createElement(j.a,null,r.a.createElement(O.a,{primary:"Click the button 'New feeding' to start measuring intervals"})))),l&&r.a.createElement(y.a,null)))},Je=a(114),Ue=(a(181),function(e){var t=e.data,a=e.options,c=e.responsiveOptions,i=r.a.createRef(),l=Object(n.useState)(null),u=Object(o.a)(l,2),m=u[0],s=u[1];return Object(n.useEffect)(function(){return m&&m.detach(),s(Je.Line(i.current,t,a,c)),function(){return m&&m.detach()}},[i,t,a,c,m,s]),m&&m.update(t,a),r.a.createElement("div",{ref:i})}),Xe=function(e){var t=e.spaceId,a=Object(f.c)(de,{fetchPolicy:"cache-and-network",variables:{spaceId:t}}),n=a.loading,c=a.data;if(!c)return r.a.createElement("div",null,r.a.createElement(y.a,null));var i={labels:c.stats.extra_food_per_day.map(function(e){return e.date}),series:[{data:c.stats.extra_food_per_day.map(function(e){return e.extra_food})}]},o=function(e){return function(t,a){return a%e==0?t.split("/").slice(0,2).join("/"):""}},l={showArea:!0,showPoint:!1,low:0,axisY:{labelInterpolationFnc:function(e){return"".concat(e,"ml")}},axisX:{labelInterpolationFnc:o(7)}},u=[["screen and (min-width: 640px)",{showPoint:!0,axisX:{labelInterpolationFnc:o(3)}}]];return r.a.createElement("div",null,r.a.createElement("div",{style:{height:30}},n&&r.a.createElement(y.a,{size:20})),r.a.createElement(Ue,{data:i,options:l,responsiveOptions:u}))},Ye=a(236),Ke=a(230),Ze=a(227),et=a(228),tt=a(182),at=a(235),nt=a(229),rt=a(234),ct=r.a.createContext(null),it=function(e){return{pattern:e,path:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return u.f.apply(void 0,[e].concat(a))}}},ot=it("/"),lt=it("/select"),ut=it("/space/:id/:tab(stats)?"),mt=it("/edit/:id"),st=Object(w.a)({appBar:{backgroundColor:"#3e4451"},avatar:{margin:15,width:40,height:40,marginLeft:"auto"},toolbar:{height:70,paddingLeft:15}}),dt=function(e){var t=e.toolbarIcon,a=e.children,c=st(),i=Object(n.useContext)(ct),u=r.a.useState(null),m=Object(o.a)(u,2),s=m[0],d=m[1];function f(){d(null)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,{className:c.appBar},r.a.createElement(et.a,{disableGutters:!0,className:c.toolbar},t,r.a.createElement(De.a,{variant:"h5"},"Food time"),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(tt.a,{alt:"Profile picture",src:i.imageUrl,"aria-controls":"user-menu","aria-haspopup":"true",className:c.avatar,onClick:function(e){d(e.currentTarget)}}),r.a.createElement(at.a,{id:"user-menu",anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},getContentAnchorEl:null,keepMounted:!0,open:Boolean(s),onClose:f},r.a.createElement(nt.a,{component:l.b,to:lt.path(),onClick:f},"Spaces"))))),r.a.createElement(et.a,{className:c.toolbar}),r.a.createElement(rt.a,{my:2},a))},ft=function(e){var t=e.match,a=e.history,n=t.params.tab||"list";return r.a.createElement(dt,null,r.a.createElement(Ye.a,{value:n,onChange:function(e,n){a.push(Object(u.f)(t.path,Object(s.a)({},t.params,{tab:"list"===n?void 0:n})))}},r.a.createElement(Ke.a,{value:"list",label:"List"}),r.a.createElement(Ke.a,{value:"stats",label:"Stats"})),"list"===n&&r.a.createElement(Ve,e),"stats"===n&&r.a.createElement(Xe,{spaceId:t.params.id}))},pt=Object(w.a)(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2}}});var bt=function(){var e=pt(),t=Object(f.c)(le),a=t.loading,n=t.data,c=(t.error,Object(f.b)(me,{variables:{name:"New space"},refetchQueries:["getSpaces"]})),i=Object(o.a)(c,2),u=i[0],m=i[1],s=m.loading;return m.error,r.a.createElement(dt,null,r.a.createElement(g.a,{maxWidth:"sm"},r.a.createElement(v.a,{variant:"extended",color:"primary","aria-label":"New space",className:e.fab,onClick:u,disabled:s},r.a.createElement(b.a,null),"New space"),a&&r.a.createElement(y.a,null),!a&&r.a.createElement(E.a,null,r.a.createElement(h.a,{disablePadding:!0},r.a.createElement(R.CSSTransitionGroup,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},n.spaces.map(function(e){return r.a.createElement(j.a,{key:e.id,divider:!0,button:!0,component:l.b,to:ut.path({id:e.id})},r.a.createElement(O.a,null,e.display_name))}))))))},Et=a(115),gt=Object(w.a)({root:{position:"relative",minHeight:40},loader:{position:"absolute",backgroundColor:"white",top:-3,bottom:-5,left:0,right:0,zIndex:1}}),vt=function(e){var t=e.onLogin,a=gt(),c=function(e){t(e)},i=Object(n.useState)(!0),l=Object(o.a)(i,2),u=l[0],m=l[1];return Object(n.useEffect)(function(){var e=setTimeout(function(){m(!1)},1500);return function(){return clearTimeout(e)}}),r.a.createElement(dt,null,r.a.createElement("div",{className:a.root},u&&r.a.createElement("div",{className:a.loader},r.a.createElement(y.a,null)),r.a.createElement(Et.GoogleLogin,{clientId:"299114443733-g59vv11262camtp97hiv99sjh0qr3b9i.apps.googleusercontent.com",buttonText:"Login",onSuccess:c,onFailure:c,isSignedIn:!0,cookiePolicy:"single_host_origin"})))},ht=a(119),jt=a.n(ht),Ot=a(117),yt=a(116),wt=a(75),xt=a(76),kt=a(118),_t=a(231),Nt=a(242),Ct=a(78),It=a.n(Ct),St=a(79),Tt=a.n(St),Dt=a(232),$t=a(237),Ft=a(239);function Bt(e){var t=null,a=!1;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];a?t=function(){return e.apply(void 0,r)}:function e(n){a=!0,n().then(function(){if(a=!1,null!=t){var n=t;t=null,e(n)}})}(function(){return e.apply(void 0,r)})}}var Lt=Object(w.a)(function(e){return Object(Ft.a)({root:{padding:e.spacing(3,5)},dateTime:{display:"flex",flexDirection:"column"},date:{marginLeft:20},arrow:{color:"#808edc",minWidth:"initial"},dateTimeBar:{display:"flex",flexDirection:"row",padding:10}})}),zt=function(e,t,a){var n=null;try{n=e.readQuery({query:K,variables:{spaceId:t}})}catch(r){}n&&e.writeQuery({query:K,variables:{spaceId:t},data:{entries:a(n.entries)}})};var Rt=function(e){var t=e.match,a=e.data,c=t.params.id,i=a.entry.spaceId,l=Object(f.b)(ie,{variables:{id:c},update:function(e,t){var a=t.data.removeEntry;zt(e,i,function(e){return e.filter(function(e){return e.id!==a.removedId})})}}),m=Object(o.a)(l,2),d=m[0],p=m[1].data,b=Object(n.useState)(new Date(1e3*a.entry.time)),v=Object(o.a)(b,2),h=v[0],j=v[1],O=Object(n.useState)(a.entry.extra_food),y=Object(o.a)(O,2),w=y[0],x=y[1],k=Object(n.useState)("bottle"===a.entry.type),_=Object(o.a)(k,2),N=_[0],C=_[1],I=Object(n.useState)(a.entry.source),S=Object(o.a)(I,2),T=S[0],D=S[1],F=Object(n.useState)(a.entry.vitamin),B=Object(o.a)(F,2),L=B[0],z=B[1],R=Object(n.useState)(a.entry.feeding_duration),H=Object(o.a)(R,2),A=H[0],M=H[1],W=Object(f.a)(),P=Object(n.useCallback)(Bt(function(e){return W.mutate({mutation:re,variables:Object(s.a)({id:c},e),update:function(e){zt(e,i,function(e){return e.sort(function(e,t){return t.time-e.time})})}})}),[W,c]),q=function(e){j(e),P({time:Math.round(e.getTime()/1e3)})},G=function(e,t){return 0===e?"breast":t?"bottle":"mixed"},Q=Lt();if(p)return r.a.createElement(u.a,{to:ut.path({id:i})});var V,J=N?null:r.a.createElement(_t.a,{item:!0,xs:12,md:12},r.a.createElement(E.a,{className:Q.root},r.a.createElement(He,{id:c,breastFeedingSource:T,onChange:function(e){D(e)}}))),U=N?null:r.a.createElement(_t.a,{item:!0,xs:12,md:12},r.a.createElement(E.a,{className:Q.root},r.a.createElement(De.a,{paragraph:!0},"Feeding duration - ",A,"min"),r.a.createElement(Nt.a,{defaultValue:A,valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:30,onChange:function(e,t){return function(e){M(e),P({feeding_duration:e})}(t)}})));return r.a.createElement("header",null,r.a.createElement("div",{className:["App-header",Q.dateTimeBar].join(" ")},r.a.createElement("div",{className:Q.dateTime},r.a.createElement($e.a,{className:Q.arrow,onClick:function(){return q(Object(wt.a)(h,1))}},r.a.createElement(It.a,null)),r.a.createElement(De.a,{variant:"h5"},r.a.createElement("span",null,(V=h,Object($.a)(new Date(V),"HH")))),r.a.createElement($e.a,{className:Q.arrow,onClick:function(){return q(Object(yt.a)(h,1))}},r.a.createElement(Tt.a,null))),":",r.a.createElement("div",{className:Q.dateTime},r.a.createElement($e.a,{className:Q.arrow,onClick:function(){return q(Object(qe.a)(h,5))}},r.a.createElement(It.a,null)),r.a.createElement(De.a,{variant:"h5"},r.a.createElement("span",null,function(e){return Object($.a)(new Date(e),"mm")}(h))),r.a.createElement($e.a,{className:Q.arrow,onClick:function(){return q(Object(Ot.a)(h,5))}},r.a.createElement(Tt.a,null))),r.a.createElement("div",{className:[Q.dateTime,Q.date].join(" ")},r.a.createElement($e.a,{className:Q.arrow,onClick:function(){return q(Object(xt.a)(h,1))}},r.a.createElement(It.a,null)),r.a.createElement(De.a,{variant:"h6"},r.a.createElement("span",null,function(e){return Object($.a)(new Date(e),"d MMM, yyyy")}(h))),r.a.createElement($e.a,{className:Q.arrow,onClick:function(){return q(Object(kt.a)(h,1))}},r.a.createElement(Tt.a,null)))),r.a.createElement(g.a,{maxWidth:"sm"},r.a.createElement(_t.a,{container:!0,spacing:2,direction:"row",justify:"center"},r.a.createElement(_t.a,{item:!0,xs:12,md:12},r.a.createElement(E.a,{className:Q.root},r.a.createElement(De.a,{paragraph:!0},"Extra food - ",w,"ml"),r.a.createElement(Nt.a,{defaultValue:w,valueLabelDisplay:"off",step:5,min:0,max:150,onChange:function(e,t){return function(e){x(e),C(!0),P({extra_food:e,type:G(e,!0)})}(t)}}))),r.a.createElement(_t.a,{item:!0,xs:12,md:12},r.a.createElement(E.a,{className:Q.root},r.a.createElement(Dt.a,{control:r.a.createElement($t.a,{checked:N,onChange:function(e){var t=e.target.checked;C(t);var a=G(w,t);P({type:a})},color:"primary"}),label:"Bottle only"}))),J,U,r.a.createElement(_t.a,{item:!0,xs:12,md:12},r.a.createElement(E.a,{className:Q.root},r.a.createElement(De.a,{paragraph:!0},"Got vitamin?"),r.a.createElement(ze.a,{value:L?"1":"0",exclusive:!0,onChange:function(e,t){z("1"===t),P({vitamin:"1"===t})}},r.a.createElement(Re.a,{value:"1"},"Yes"),r.a.createElement(Re.a,{value:"0"},"No")))),r.a.createElement(_t.a,{item:!0,xs:12,md:12},r.a.createElement(E.a,{className:Q.root},r.a.createElement(De.a,{paragraph:!0},"Danger zone"),r.a.createElement($e.a,{variant:"contained",color:"secondary",onClick:d},"Delete"))))))};var Ht=function(e){var t=e.match,a=t.params.id,n=Object(f.c)(ee,{variables:{id:a}}),c=n.loading,i=n.data,o=i&&i.entry.spaceId,u=o&&r.a.createElement(S.a,{edge:"start",color:"inherit",component:r.a.forwardRef(function(e,t){return r.a.createElement(l.b,Object.assign({},e,{ref:t,to:ut.path({id:o})}))})},r.a.createElement(jt.a,null));return r.a.createElement(dt,{toolbarIcon:u},c?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"}),r.a.createElement(g.a,{maxWidth:"sm"},r.a.createElement(y.a,null))):r.a.createElement(Rt,{data:i,match:t}))},At=a(233),Mt=Object(w.a)(function(e){return Object(Ft.a)({root:{padding:e.spacing(5,2)}})}),Wt=function(){var e=Mt();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},"ERROR 404"),r.a.createElement(g.a,{className:e.root,maxWidth:"sm"},r.a.createElement(De.a,{variant:"h5",paragraph:!0},"NOT FOUND"),r.a.createElement(De.a,{variant:"body"},"Go back to the ",r.a.createElement(At.a,{to:"/",component:l.b},"homepage"))))},Pt=Object(u.h)(function(e){var t=e.children,a=e.location.pathname;return Object(n.useEffect)(function(){window.scrollTo(0,0)},[a]),t||null}),qt=a(48),Gt=a(125),Qt=a(123),Vt=a(120),Jt=a(121),Ut=a(126),Xt=a(122),Yt=a(127),Kt=a(24),Zt=function(e){function t(e,a){var n;return Object(Vt.a)(this,t),(n=Object(Ut.a)(this,Object(Xt.a)(t).call(this))).token=a,n.user=e,n}return Object(Yt.a)(t,e),Object(Jt.a)(t,[{key:"setTokenHeader",value:function(e){e.setContext({headers:{authorization:"Bearer ".concat(this.token)}})}},{key:"refreshToken",value:function(){var e=this;return new Promise(function(t){e.user.reloadAuthResponse().then(function(a){e.token=a.id_token,t(!0)})})}},{key:"request",value:function(e,t){var a=this;return this.setTokenHeader(e),new Kt.a(function(n){var r,c;try{r=t(e).subscribe({next:n.next.bind(n),complete:n.complete.bind(n),error:function(r){400===r.statusCode?a.refreshToken().then(function(r){r?(a.setTokenHeader(e),c=t(e).subscribe(n)):n.error(new Error("refreshing token failed"))}):n.error(r)}})}catch(i){n.error(i)}return function(){r&&r.unsubscribe(),c&&c.unsubscribe()}})}}]),t}(a(39).a);function ea(e){var t=Object(Gt.a)({uri:"https://papi.ertrzyiks.me/food-time"}),a=new Zt(e,e.tokenId);return new qt.a({cache:new Qt.a({cacheRedirects:{Query:{entry:function(e,t,a){return(0,a.getCacheKey)({__typename:"Entry",id:t.id})}}}}),link:a.concat(t)})}a(183);var ta=function(e){var t=e.match,a=e.write,r=e.children,c=t.params.id;return Object(n.useEffect)(function(){a(c)},[a,c]),r};var aa=function(e){var t=e.storage,a=t.read,c=t.write,i=a("food-time-space-id"),s=Object(n.useState)(null),d=Object(o.a)(s,2),f=d[0],p=d[1];return r.a.createElement(ct.Provider,{value:f&&f.profileObj},r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(Pt,null),r.a.createElement(u.d,null,f?r.a.createElement(m.a,{client:ea(f)},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:lt.pattern,render:function(e){return r.a.createElement(bt,e)}}),r.a.createElement(u.b,{path:ut.pattern,render:function(e){return r.a.createElement(ta,{write:function(e){return c("food-time-space-id",e)},match:e.match},r.a.createElement(ft,e))}}),r.a.createElement(u.b,{path:mt.pattern,render:function(e){return r.a.createElement(Ht,e)}}),r.a.createElement(u.b,{exact:!0,path:ot.pattern},i?r.a.createElement(u.a,{to:ut.path({id:i})}):r.a.createElement(u.a,{to:lt.path()})))):r.a.createElement(u.b,{path:ot.pattern,render:function(e){return r.a.createElement(vt,Object.assign({},e,{onLogin:function(e){p(e)}}))}}),r.a.createElement(u.b,{component:Wt})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(aa,{storage:{read:function(e){return JSON.parse(window.localStorage.getItem(e))},write:function(e,t){return window.localStorage.setItem(e,JSON.stringify(t))}}}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[138,1,2]]]);
//# sourceMappingURL=main.fbcebb6c.chunk.js.map