(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){"use strict";(function(e){var n=a(0),r=a.n(n);t.a=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,c=r.a.useRef();r.a.useEffect(function(){c.current=a},[a]),r.a.useEffect(function(){if(n&&n.addEventListener){var e=function(e){return c.current(e)};return n.addEventListener(t,e),function(){n.removeEventListener(t,e)}}},[t,n])}}).call(this,a(59))},137:function(e,t,a){e.exports=a(170)},142:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),o=(a(142),a(15)),l=a(30),m=a(39),u=a(74),s=a(62),d=a(125),f=a(228),p=a(208),b=a(45),E=a.n(b),g=a(129),v=a(216),h=a(217),y=a(209),O=a(172),j=a(205),k=a(218),w=a(203),x=a(229),N=a(204),_=Object(w.a)(function(e){return{error:{backgroundColor:e.palette.error.dark}}}),C=function(e){var t=e.message,a=Object(n.useState)(!0),c=Object(o.a)(a,2),i=c[0],l=c[1],m=_();if(!t)return null;function u(e,t){"clickaway"!==t&&l(!1)}return t.networkError&&t.networkError.result&&t.networkError.result.errors&&t.networkError.result.errors.length>0&&(t=t.networkError.result.errors[0].message.slice(0,100)),r.a.createElement(x.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:6e3,onClose:u,open:i},r.a.createElement(N.a,{className:m.error,message:t.toString(),onClose:u}))},S=a(211),I=a(210),D=a(231),$=a(212),T=a(111),z=a.n(T),F=a(107),R=a.n(F),L=a(108),B=a.n(L),A=a(109),H=a.n(A),M=a(207),W=a(79),q=a(56),G=a(101),P=a(69);function Q(e){return Object(q.a)(new Date(e),"HH:mm")}function J(e,t){var a=Object(G.a)(e,t),n=Object(P.a)(e,t)%60;return a<1?"".concat(n,"min"):"".concat(a,"h ").concat(n,"min")}var U=a(70);function V(e,t){var a=Object(n.useRef)();Object(n.useEffect)(function(){a.current=e},[e]),Object(n.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}var K=function(e){var t=e.time,a=e.key,c=e.className,i=Object(n.useState)(0),l=Object(o.a)(i,2),m=l[0],u=l[1];V(function(){u(m+1)},15e3);var s=Date.now(),d=new Date(1e3*t);return r.a.createElement(O.a,{key:a,className:c},r.a.createElement(j.a,{primary:"Next at ".concat(Q(d)),secondary:d>s&&J(d,s)}))},Y=a(206),X=a(85),Z=a.n(X),ee=a(84),te=a.n(ee),ae=Object(w.a)({icon_wrapper:{display:"flex",flexDirection:"column",fontSize:12,marginRight:5},bottle_icon:{color:"#24a0ff"},icon_container:{display:"flex"},small_icon:{fontSize:"1rem"}}),ne=function(e){var t,a=e.type,n=e.extra_food,c=ae();switch(a){case"breast":t=r.a.createElement(te.a,null);break;case"bottle":t=r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{className:c.bottle_icon})," ",n,"ml");break;case"mixed":t=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:c.icon_container},r.a.createElement(te.a,{className:c.small_icon}),r.a.createElement(Z.a,{className:[c.bottle_icon,c.small_icon].join(" ")})),r.a.createElement("span",null,n,"ml"))}return r.a.createElement(Y.a,null,r.a.createElement("div",{className:c.icon_wrapper},t))},re=a(25),ce=a(26),ie=a.n(ce);function oe(){var e=Object(re.a)(["\n  query getEntries($spaceId: String!) {\n    entries(spaceId: $spaceId) {\n      id\n      time\n      extra_food\n      spaceId\n      type  \n      vitamin\n      source\n    }\n  }\n"]);return oe=function(){return e},e}var le=ie()(oe());function me(){var e=Object(re.a)(["\n  query getEntry($id: String!) {\n    entry(id: $id) {\n      id\n      time\n      extra_food\n      spaceId\n      type \n      vitamin\n      source  \n    }\n  }\n"]);return me=function(){return e},e}var ue=ie()(me());function se(){var e=Object(re.a)(["\n  mutation CreateEntry($spaceId: String!, $time: Int!) {\n    createEntry(spaceId: $spaceId, time: $time) {\n      id\n      time\n      extra_food\n      type  \n      vitamin\n      source\n    }\n  }\n"]);return se=function(){return e},e}var de=ie()(se());function fe(){var e=Object(re.a)(["\n  mutation UpdateEntry($id: String!, $time: Int, $extra_food: Int, $type: String, $vitamin: Boolean, $source: String) {\n    updateEntry(id: $id, time: $time, extra_food: $extra_food, type: $type, vitamin: $vitamin, source: $source) {\n      id\n      time\n      extra_food\n      type  \n      vitamin\n      source\n    }\n  }\n"]);return fe=function(){return e},e}var pe=ie()(fe());function be(){var e=Object(re.a)(["\n  mutation RemoveEntry($id: String!) {\n    removeEntry(id: $id) {\n      message\n      removedId\n    }\n  }\n"]);return be=function(){return e},e}var Ee=ie()(be());function ge(){var e=Object(re.a)(["\n  query getSpaces {\n    spaces {\n      id\n      display_name\n    }\n  }\n"]);return ge=function(){return e},e}var ve=ie()(ge());function he(){var e=Object(re.a)(["\n  mutation CreateSpace($name: String!) {\n    createSpace(name: $name) {\n      id\n      display_name\n    }\n  }\n"]);return he=function(){return e},e}var ye=ie()(he()),Oe=Object(w.a)(function(e){return{item:{opacity:.3},root:{backgroundColor:e.palette.background.paper},subheader:{backgroundColor:"#f0f2fa",color:e.palette.common.black,textAlign:"left"},subheader_total:{float:"right"},subheader_vitamin:{marginLeft:35},narrow_column:{flex:"initial",marginRight:35},source_column:{color:"#644889"},vitamin_column:{color:"#b17714"},green_chip:{backgroundColor:M.a[100]},red_chip:{backgroundColor:W.a[100]}}}),je={left:"L",right:"R",both:"LR",none:""},ke=function(e){var t=e.groupedEntries,a=Date.now(),n=Oe(),c=Object(p.a)(pe,{refetchQueries:["getEntries"]}),i=Object(o.a)(c,2),m=i[0],u=i[1];u.loading,u.error;return r.a.createElement(y.a,{disablePadding:!0,className:n.root},Object.entries(t).map(function(e){var t=Object(o.a)(e,2),c=t[0],i=t[1],u=i.filter(function(e){return!e.isSuggested}),s=u.filter(function(e){return e.vitamin}),d=s.length>0?1e3*s[0].time:null,f=u[0];return r.a.createElement(U.CSSTransitionGroup,{key:c,transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},r.a.createElement(I.a,{className:n.subheader},Object(q.a)(parseInt(c,10),"d MMM, yyyy"),r.a.createElement("span",{className:n.subheader_vitamin},r.a.createElement(D.a,{size:"small",label:"Vit D3 ".concat(d?"("+Object(q.a)(d,"HH:mm")+")":""),icon:d?r.a.createElement(R.a,null):r.a.createElement(B.a,null),deleteIcon:r.a.createElement(H.a,null),onDelete:!d&&f?function(){m({variables:{id:f.id,vitamin:!0}})}:null,className:d?n.green_chip:n.red_chip})),r.a.createElement("span",{className:n.subheader_total},"(total ",function(e){return e.filter(function(e){return!e.isSuggested}).length}(i),")")),i.map(function(e){var t=e.id,c=e.time,i=e.extra_food,o=e.type,m=e.vitamin,u=e.meantime,s=e.source;return e.isSuggested?r.a.createElement(K,{key:t,time:c,className:n.item}):r.a.createElement(O.a,{key:t},r.a.createElement(ne,{type:o,extra_food:i}),r.a.createElement(j.a,{secondary:u,className:n.narrow_column},Q(1e3*c)),r.a.createElement(j.a,{className:[n.source_column,n.narrow_column].join(" ")},je[s]),r.a.createElement(j.a,{className:[n.vitamin_column,n.narrow_column].join(" ")},m?"Vit D3":""),r.a.createElement(S.a,null,a-1e3*c<864e5&&r.a.createElement($.a,{edge:"end","aria-label":"Comments",component:l.b,to:"/edit/".concat(t)},r.a.createElement(z.a,null))))}))}))},we=a(112),xe=a.n(we),Ne=a(113),_e=a.n(Ne),Ce=a(48),Se=Object(w.a)(function(e){return{info:{backgroundColor:e.palette.primary.main},error:{backgroundColor:e.palette.error.dark},messageBox:{marginBottom:20,position:"sticky",top:70,zIndex:10},message:{display:"flex",alignItems:"center"},icon:{marginRight:e.spacing(1)}}}),Ie=function(e){var t=Se(),a=e.variant,n=e.children;return r.a.createElement(N.a,{className:[t[a],t.messageBox].join(" "),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},"info"===a?r.a.createElement(xe.a,{className:t.icon}):r.a.createElement(_e.a,{className:t.icon}),n)})},De=function(e){var t=e.lastFeedingTime,a=e.nextFeedingTime,c=Object(n.useState)(0),i=Object(o.a)(c,2),l=i[0],m=i[1];V(function(){m(l+1)},3e4);var u=Object(P.a)(new Date,new Date(t))>5?r.a.createElement(r.a.Fragment,null,"It's been\xa0",r.a.createElement(Ce.a,{variant:"subtitle1",component:"span"},J(new Date,new Date(t))),"\xa0since last feeding "):r.a.createElement(r.a.Fragment,null,"Feeding in progress");return r.a.createElement(Ie,{class:"mui-fixed",variant:Date.now()>a?"error":"info"},u)},$e=a(213),Te=a(214),ze=a(168),Fe=a(225),Re=a(215),Le=a(224),Be=r.a.createContext(null),Ae=function(e){return{pattern:e,path:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return m.f.apply(void 0,[e].concat(a))}}},He=Ae("/"),Me=Ae("/select"),We=Ae("/space/:id"),qe=Ae("/edit/:id"),Ge=Object(w.a)({appBar:{backgroundColor:"#3e4451"},avatar:{margin:15,width:40,height:40,marginLeft:"auto"},toolbar:{height:70,paddingLeft:15}}),Pe=function(e){var t=e.toolbarIcon,a=e.children,c=Ge(),i=Object(n.useContext)(Be),m=r.a.useState(null),u=Object(o.a)(m,2),s=u[0],d=u[1];function f(){d(null)}return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{className:c.appBar},r.a.createElement(Te.a,{disableGutters:!0,className:c.toolbar},t,r.a.createElement(Ce.a,{variant:"h5"},"Food time"),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ze.a,{alt:"Profile picture",src:i.imageUrl,"aria-controls":"user-menu","aria-haspopup":"true",className:c.avatar,onClick:function(e){d(e.currentTarget)}}),r.a.createElement(Fe.a,{id:"user-menu",anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},getContentAnchorEl:null,keepMounted:!0,open:Boolean(s),onClose:f},r.a.createElement(Re.a,{component:l.b,to:Me.path(),onClick:f},"Spaces"))))),r.a.createElement(Te.a,{className:c.toolbar}),r.a.createElement(Le.a,{my:2},a))},Qe=a(115),Je=a(53),Ue=a(114),Ve=Object(w.a)(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2},listWrapper:{marginTop:e.spacing(2)}}});var Ke=function(e){var t=e.match,a=Ve(),n=t.params.id,c=Object(f.a)(le,{variables:{spaceId:n}}),i=c.loading,l=c.data,m=c.error,u=c.refetch,b=!i&&!m,w=r.a.useCallback(function(){!1===document.hidden&&u()},[u]);Object(Ue.a)("visibilitychange",w,document);var x=Object(p.a)(de,{refetchQueries:["getEntries"]}),N=Object(o.a)(x,2),_=N[0],S=N[1],I=S.loading,D=S.error,$=b&&l.entries.slice().reverse().reduce(function(e,t){if(e.length>0){var a=e[e.length-1];return[].concat(Object(d.a)(e),[Object(s.a)({},t,{meantime:J(new Date(1e3*t.time),new Date(1e3*a.time))})])}return[Object(s.a)({},t,{meantime:null})]},[]).reverse();if($.length>0){var T=$[0],z=new Date(1e3*T.time),F=z.getHours(),R=F>=21||F<3?210:150;$.unshift({id:"future",time:Math.round(Object(Je.a)(z,R)/1e3),extra_food:0,meantime:null,isSuggested:!0})}var L=$&&$.reduce(function(e,t){var a=Object(Qe.a)(new Date(1e3*t.time)).getTime();return e[a]=e[a]||[],e[a].push(t),e},{});return r.a.createElement(Pe,null,(m||D)&&r.a.createElement(C,{message:m||D}),r.a.createElement(v.a,{className:a.listWrapper,maxWidth:"sm"},r.a.createElement(h.a,{variant:"extended",color:"primary","aria-label":"delete",className:a.fab,onClick:function(){return _({variables:{time:Math.round(Date.now()/1e3),spaceId:n}})},disabled:I},r.a.createElement(E.a,null),"New feeding"),!i&&l&&l.entries.length>0&&r.a.createElement(De,{lastFeedingTime:1e3*$[1].time,nextFeedingTime:1e3*$[0].time}),!i&&!m&&r.a.createElement(g.a,null,!i&&l&&l.entries.length>0&&r.a.createElement(ke,{groupedEntries:L}),!i&&l&&0===l.entries.length&&r.a.createElement(y.a,null,r.a.createElement(O.a,null,r.a.createElement(j.a,{primary:"Click the button to start measuring intervals"})))),i&&r.a.createElement(k.a,null)))},Ye=Object(w.a)(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2),zIndex:2}}});var Xe=function(){var e=Ye(),t=Object(f.a)(ve),a=t.loading,n=t.data,c=(t.error,Object(p.a)(ye,{variables:{name:"New space"},refetchQueries:["getSpaces"]})),i=Object(o.a)(c,2),m=i[0],u=i[1],s=u.loading;return u.error,r.a.createElement(Pe,null,r.a.createElement(v.a,{maxWidth:"sm"},r.a.createElement(h.a,{variant:"extended",color:"primary","aria-label":"New space",className:e.fab,onClick:m,disabled:s},r.a.createElement(E.a,null),"New space"),a&&r.a.createElement(k.a,null),!a&&r.a.createElement(g.a,null,r.a.createElement(y.a,{disablePadding:!0},r.a.createElement(U.CSSTransitionGroup,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300},n.spaces.map(function(e){return r.a.createElement(O.a,{key:e.id,divider:!0,button:!0,component:l.b,to:We.path({id:e.id})},r.a.createElement(j.a,null,e.display_name))}))))))},Ze=a(116),et=Object(w.a)({root:{position:"relative",minHeight:40},loader:{position:"absolute",backgroundColor:"white",top:-3,bottom:-5,left:0,right:0,zIndex:1}}),tt=function(e){var t=e.onLogin,a=et(),c=function(e){t(e)},i=Object(n.useState)(!0),l=Object(o.a)(i,2),m=l[0],u=l[1];return Object(n.useEffect)(function(){var e=setTimeout(function(){u(!1)},1500);return function(){return clearTimeout(e)}}),r.a.createElement(Pe,null,r.a.createElement("div",{className:a.root},m&&r.a.createElement("div",{className:a.loader},r.a.createElement(k.a,null)),r.a.createElement(Ze.GoogleLogin,{clientId:"299114443733-g59vv11262camtp97hiv99sjh0qr3b9i.apps.googleusercontent.com",buttonText:"Login",onSuccess:c,onFailure:c,isSignedIn:!0,cookiePolicy:"single_host_origin"})))},at=a(120),nt=a.n(at),rt=a(119),ct=a(118),it=a(78),ot=a(77),lt=a(117),mt=a(219),ut=a(233),st=a(222),dt=a(232),ft=a(221),pt=a(80),bt=a.n(pt),Et=a(220),gt=a(226),vt=a(230);function ht(e){var t=null,a=!1;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];a?t=function(){return e.apply(void 0,r)}:function e(n){a=!0,n().then(function(){if(a=!1,null!=t){var n=t;t=null,e(n)}})}(function(){return e.apply(void 0,r)})}}var yt=Object(w.a)(function(e){return Object(vt.a)({root:{padding:e.spacing(3,5)}})}),Ot=function(e,t,a){var n=null;try{n=e.readQuery({query:le,variables:{spaceId:t}})}catch(r){}n&&e.writeQuery({query:le,variables:{spaceId:t},data:{entries:a(n.entries)}})};var jt=function(e){var t,a=e.match,c=e.data,i=a.params.id,l=c.entry.spaceId,d=Object(p.a)(Ee,{variables:{id:i},update:function(e,t){var a=t.data.removeEntry;Ot(e,l,function(e){return e.filter(function(e){return e.id!==a.removedId})})}}),f=Object(o.a)(d,2),b=f[0],y=f[1].data,O=Object(n.useState)(new Date(1e3*c.entry.time)),j=Object(o.a)(O,2),k=j[0],w=j[1],x=Object(n.useState)(c.entry.extra_food),N=Object(o.a)(x,2),_=N[0],C=N[1],S=Object(n.useState)("bottle"===c.entry.type),I=Object(o.a)(S,2),D=I[0],$=I[1],T=Object(n.useState)(c.entry.source),z=Object(o.a)(T,2),F=z[0],R=z[1],L=Object(n.useState)(c.entry.vitamin),B=Object(o.a)(L,2),A=B[0],H=B[1],M=Object(u.b)(),W=Object(n.useCallback)(ht(function(e){return M.mutate({mutation:pe,variables:Object(s.a)({id:i},e),update:function(e){Ot(e,l,function(e){return e.sort(function(e,t){return t.time-e.time})})}})}),[M,i]),G=function(e){w(e),W({time:Math.round(e.getTime()/1e3)})},P=function(e,t){return 0===e?"breast":t?"bottle":"mixed"},J=yt();return y?r.a.createElement(m.a,{to:We.path({id:l})}):r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},r.a.createElement(Ce.a,{variant:"h5"},Q(k)," ",(t=k,Object(q.a)(new Date(t),"d MMM, yyyy")))),r.a.createElement(v.a,{maxWidth:"sm"},r.a.createElement(mt.a,{container:!0,spacing:2,direction:"row",justify:"center"},r.a.createElement(mt.a,{item:!0,xs:12,md:4},r.a.createElement(g.a,{className:J.root},r.a.createElement(Ce.a,{paragraph:!0},"Day"),r.a.createElement(h.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return G(Object(ot.a)(k,1))}},r.a.createElement(E.a,null)),r.a.createElement(h.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return G(Object(lt.a)(k,1))}},r.a.createElement(bt.a,null)))),r.a.createElement(mt.a,{item:!0,xs:12,md:4},r.a.createElement(g.a,{className:J.root},r.a.createElement(Ce.a,{paragraph:!0},"Hours"),r.a.createElement(h.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return G(Object(it.a)(k,1))}},r.a.createElement(E.a,null)),r.a.createElement(h.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return G(Object(ct.a)(k,1))}},r.a.createElement(bt.a,null)))),r.a.createElement(mt.a,{item:!0,xs:12,md:4},r.a.createElement(g.a,{className:J.root},r.a.createElement(Ce.a,{paragraph:!0},"Minutes"),r.a.createElement(h.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return G(Object(Je.a)(k,5))}},r.a.createElement(E.a,null)),r.a.createElement(h.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return G(Object(rt.a)(k,5))}},r.a.createElement(bt.a,null)))),r.a.createElement(mt.a,{item:!0,xs:12,md:12},r.a.createElement(g.a,{className:J.root},r.a.createElement(Ce.a,{paragraph:!0},"Extra food - ",_,"ml"),r.a.createElement(ut.a,{defaultValue:_,"aria-labelledby":"discrete-slider",valueLabelDisplay:"off",step:5,min:0,max:150,onChange:function(e,t){return function(e){C(e),$(!0),W({extra_food:e,type:P(e,!0)})}(t)}}))),r.a.createElement(mt.a,{item:!0,xs:12,md:12},r.a.createElement(g.a,{className:J.root},r.a.createElement(Et.a,{control:r.a.createElement(gt.a,{checked:D,onChange:function(e){var t=e.target.checked;$(t);var a=P(_,t);W({type:a})},color:"primary"}),label:"Bottle only"}))),r.a.createElement(mt.a,{item:!0,xs:12,md:12},r.a.createElement(g.a,{className:J.root},r.a.createElement(Ce.a,{paragraph:!0},"Breast feeding source"),r.a.createElement(dt.a,{value:F,exclusive:!0,onChange:function(e,t){R(t),W({source:t})}},r.a.createElement(ft.a,{value:"left"},"Left"),r.a.createElement(ft.a,{value:"right"},"Right"),r.a.createElement(ft.a,{value:"both"},"Both"),r.a.createElement(ft.a,{value:"none"},"None")))),r.a.createElement(mt.a,{item:!0,xs:12,md:12},r.a.createElement(g.a,{className:J.root},r.a.createElement(Ce.a,{paragraph:!0},"Got vitamin?"),r.a.createElement(dt.a,{value:A?"1":"0",exclusive:!0,onChange:function(e,t){H("1"===t),W({vitamin:"1"===t})}},r.a.createElement(ft.a,{value:"1"},"Yes"),r.a.createElement(ft.a,{value:"0"},"No")))),r.a.createElement(mt.a,{item:!0,xs:12,md:12},r.a.createElement(g.a,{className:J.root},r.a.createElement(Ce.a,{paragraph:!0},"Danger zone"),r.a.createElement(st.a,{variant:"contained",color:"secondary",onClick:b},"Delete"))))))};var kt=function(e){var t=e.match,a=t.params.id,n=Object(f.a)(ue,{variables:{id:a}}),c=n.loading,i=n.data,o=i&&i.entry.spaceId,m=o&&r.a.createElement($.a,{edge:"start",color:"inherit",component:function(e){return r.a.createElement(l.b,Object.assign({},e,{to:We.path({id:o})}))}},r.a.createElement(nt.a,null));return r.a.createElement(Pe,{toolbarIcon:m},c?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"}),r.a.createElement(v.a,{maxWidth:"sm"},r.a.createElement(k.a,null))):r.a.createElement(jt,{data:i,match:t}))},wt=a(223),xt=Object(w.a)(function(e){return Object(vt.a)({root:{padding:e.spacing(5,2)}})}),Nt=function(){var e=xt();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},"ERROR 404"),r.a.createElement(v.a,{className:e.root,maxWidth:"sm"},r.a.createElement(Ce.a,{variant:"h5",paragraph:!0},"NOT FOUND"),r.a.createElement(Ce.a,{variant:"body"},"Go back to the ",r.a.createElement(wt.a,{to:"/",component:l.b},"homepage"))))},_t=a(52),Ct=a(128),St=a(124),It=a(121),Dt=a(122),$t=a(126),Tt=a(123),zt=a(127),Ft=a(21),Rt=function(e){function t(e,a){var n;return Object(It.a)(this,t),(n=Object($t.a)(this,Object(Tt.a)(t).call(this))).token=a,n.user=e,n}return Object(zt.a)(t,e),Object(Dt.a)(t,[{key:"setTokenHeader",value:function(e){e.setContext({headers:{authorization:"Bearer ".concat(this.token)}})}},{key:"refreshToken",value:function(){var e=this;return new Promise(function(t){e.user.reloadAuthResponse().then(function(a){e.token=a.id_token,t(!0)})})}},{key:"request",value:function(e,t){var a=this;return this.setTokenHeader(e),new Ft.a(function(n){var r,c;try{r=t(e).subscribe({next:n.next.bind(n),complete:n.complete.bind(n),error:function(r){400===r.statusCode?a.refreshToken().then(function(r){r?(a.setTokenHeader(e),c=t(e).subscribe(n)):n.error(new Error("refreshing token failed"))}):n.error(r)}})}catch(i){n.error(i)}return function(){r&&r.unsubscribe(),c&&c.unsubscribe()}})}}]),t}(a(33).a);function Lt(e){var t=Object(Ct.a)({uri:"https://papi.ertrzyiks.me/food-time"}),a=new Rt(e,e.tokenId);return new _t.a({cache:new St.a({cacheRedirects:{Query:{entry:function(e,t,a){return(0,a.getCacheKey)({__typename:"Entry",id:t.id})}}}}),link:a.concat(t)})}a(169);var Bt=function(e){var t=e.match,a=e.write,r=e.children,c=t.params.id;return Object(n.useEffect)(function(){a(c)},[a,c]),r};var At=function(e){var t=e.storage,a=t.read,c=t.write,i=a("food-time-space-id"),s=Object(n.useState)(null),d=Object(o.a)(s,2),f=d[0],p=d[1];return r.a.createElement(Be.Provider,{value:f&&f.profileObj},r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(m.d,null,f?r.a.createElement(u.a,{client:Lt(f)},r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:Me.pattern,render:function(e){return r.a.createElement(Xe,e)}}),r.a.createElement(m.b,{path:We.pattern,render:function(e){return r.a.createElement(Bt,{write:function(e){return c("food-time-space-id",e)},match:e.match},r.a.createElement(Ke,Object.assign({},e,{profile:f.profileObj})))}}),r.a.createElement(m.b,{path:qe.pattern,render:function(e){return r.a.createElement(kt,e)}}),r.a.createElement(m.b,{exact:!0,path:He.pattern},i?r.a.createElement(m.a,{to:We.path({id:i})}):r.a.createElement(m.a,{to:Me.path()})))):r.a.createElement(m.b,{path:He.pattern,render:function(e){return r.a.createElement(tt,Object.assign({},e,{onLogin:function(e){p(e)}}))}}),r.a.createElement(m.b,{component:Nt})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(At,{storage:{read:function(e){return JSON.parse(window.localStorage.getItem(e))},write:function(e,t){return window.localStorage.setItem(e,JSON.stringify(t))}}}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[137,1,2]]]);
//# sourceMappingURL=main.d5b1d1ec.chunk.js.map