(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,a,t){e.exports=t(134)},115:function(e,a,t){},134:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(13),l=t.n(c),i=(t(115),t(29)),o=t(43),m=t(44),u=t.n(m),s=t(184),d=t(168),p=t(41),E=t(170),f=t(50),b=t(173),v=t(174),g=t(175),h=t(176),O=t(177),y=t(97),j=t.n(y),w=t(96),I=t.n(w),S=t(172),k=t(171),$=t(86);t(80);var C=t(73);function N(e){return Object(C.a)(new Date(e),"HH:mm")}function x(){var e=Object(o.a)(["\n  mutation CreateEntry($spaceId: String!, $time: Int!) {\n    createEntry(spaceId: $spaceId, time: $time) {\n      id\n    }\n  }\n"]);return x=function(){return e},e}function A(){var e=Object(o.a)(["\n  query getEntries($spaceId: String!) {\n    entries(spaceId: $spaceId) {\n      id\n      time\n    }\n  }\n"]);return A=function(){return e},e}function z(e){var a=e.text,t=e.last,c=Object(n.useState)(0),l=Object(i.a)(c,2),o=l[0],m=l[1];return function(e,a){var t=Object(n.useRef)();Object(n.useEffect)(function(){t.current=e},[e]),Object(n.useEffect)(function(){if(null!==a){var e=setInterval(function(){t.current()},a);return function(){return clearInterval(e)}}},[a])}(function(){m(o+1)},3e4),t?r.a.createElement("span",null,a,": ",function(e){var a=e/1e3/60;return a<1?"< 1min":"".concat(Math.round(a)," min")}(Date.now()-t.now)):null}var D=u()(A()),R=u()(x());var M=function(e){var a=e.spaceId,t=Object(s.a)(D,{variables:{spaceId:a}}),n=t.loading,c=t.data,l=Object(d.a)(R,{variables:{time:Math.round(Date.now()/1e3),spaceId:a},refetchQueries:["getEntries"]}),o=Object(i.a)(l,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},!n&&r.a.createElement(f.a,{variant:"h5",component:"p"},r.a.createElement(z,{text:"Since last event",last:0})),r.a.createElement(E.a,{variant:"contained",size:"large",color:"primary",onClick:function(){return o()}},"Now")),r.a.createElement(k.a,{maxWidth:"sm"},r.a.createElement(S.a,null,!n&&c&&c.entries.length>0&&r.a.createElement(b.a,null,r.a.createElement($.AnimateGroup,null,c.entries.map(function(e){var a=e.time,t=e.elapsedTime,n=e.id;return r.a.createElement(v.a,{key:n},r.a.createElement(g.a,{primary:N(1e3*a)}),r.a.createElement(h.a,null,r.a.createElement(O.a,{edge:"end","aria-label":"Comments",component:p.b,to:"/edit/".concat(n)},r.a.createElement(I.a,null)),t&&t<36e5&&r.a.createElement(O.a,{edge:"end","aria-label":"Comments",onClick:function(){}},r.a.createElement(j.a,null))))}))),!n&&c&&0===c.entries.length&&r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,{primary:"Click the button to start measuring intervals"}))))))},F=t(183),W=t(178);var J=function(e){var a=e.onSelect,t=Object(n.useState)(""),c=Object(i.a)(t,2),l=c[0],o=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"}),r.a.createElement("form",{onSubmit:function(){return a(l)}},r.a.createElement(W.a,{container:!0,spacing:5,direction:"column"},r.a.createElement(W.a,{item:!0},r.a.createElement(F.a,{label:"Space name",value:l,onChange:function(e){return o(e.target.value)},margin:"normal"})),r.a.createElement(W.a,{item:!0},r.a.createElement(E.a,{variant:"contained",color:"primary"},"Proceed")))))},H=t(102),T=t(100),q=t(64),B=t(99),G=t(63),Q=t(62),U=t(98),_=t(180),K=t(181),L=t(185),P=t(55),V=t(65),X=t.n(V),Y=t(66),Z=t.n(Y),ee=t(179),ae=t(186);function te(e){var a=null,t=!1;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];t?a=function(){return e.apply(void 0,r)}:function e(n){t=!0,n().then(function(){if(t=!1,null!=a){var n=a;a=null,e(n)}})}(function(){return e.apply(void 0,r)})}}function ne(){var e=Object(o.a)(["\n  mutation UpdateEntry($spaceId: String!, $id: String!, $time: Int!) {\n    updateEntry(spaceId: $spaceId, id: $id, time: $time) {\n      id\n      time\n    }\n  }\n"]);return ne=function(){return e},e}function re(){var e=Object(o.a)(["\n  query getEntry($spaceId: String!, $id: String!) {\n    entry(spaceId: $spaceId, id: $id) {\n      id\n      time\n    }\n  }\n"]);return re=function(){return e},e}var ce=u()(re()),le=u()(ne()),ie=Object(ee.a)(function(e){return Object(ae.a)({root:{padding:e.spacing(3,5)}})});var oe=function(e){var a=e.spaceId,t=e.match.params.id,c=Object(s.a)(ce,{variables:{spaceId:a,id:t}}),l=c.loading,o=c.data,m=Object(n.useState)(null),u=Object(i.a)(m,2),d=u[0],p=u[1],E=Object(P.b)(),b=Object(n.useCallback)(te(function(e){return E.mutate({mutation:le,variables:Object(H.a)({spaceId:a,id:t},e)})}),[a,t]);null!==d||l||p(new Date(1e3*o.entry.time));var v,g=function(e){p(e),b({time:Math.round(e.getTime()/1e3)})},h=ie();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},!l&&r.a.createElement(f.a,null,N(d)," ",(v=d,Object(C.a)(new Date(v),"d MMM, yyyy")))),r.a.createElement(k.a,{maxWidth:"sm"},l?r.a.createElement(_.a,null):r.a.createElement(W.a,{container:!0,spacing:2,direction:"row",justify:"center"},r.a.createElement(W.a,{item:!0,xs:12,md:4},r.a.createElement(S.a,{className:h.root},r.a.createElement(f.a,{paragraph:!0},"Day"),r.a.createElement(K.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return g(Object(Q.a)(d,1))}},r.a.createElement(X.a,null)),r.a.createElement(K.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return g(Object(U.a)(d,1))}},r.a.createElement(Z.a,null)))),r.a.createElement(W.a,{item:!0,xs:12,md:4},r.a.createElement(S.a,{className:h.root},r.a.createElement(f.a,{paragraph:!0},"Hours"),r.a.createElement(K.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return g(Object(G.a)(d,1))}},r.a.createElement(X.a,null)),r.a.createElement(K.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return g(Object(B.a)(d,1))}},r.a.createElement(Z.a,null)))),r.a.createElement(W.a,{item:!0,xs:12,md:4},r.a.createElement(S.a,{className:h.root},r.a.createElement(f.a,{paragraph:!0},"Minutes"),r.a.createElement(K.a,{color:"primary","aria-label":"Add",size:"small",onClick:function(){return g(Object(q.a)(d,5))}},r.a.createElement(X.a,null)),r.a.createElement(K.a,{color:"primary","aria-label":"Remove",size:"small",onClick:function(){return g(Object(T.a)(d,5))}},r.a.createElement(Z.a,null)))),r.a.createElement(W.a,{item:!0,xs:12,md:12},r.a.createElement(S.a,{className:h.root},r.a.createElement(f.a,{paragraph:!0},"Extra food"),r.a.createElement(L.a,{defaultValue:30,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:10,min:10,max:110}))))))},me=t(182),ue=Object(ee.a)(function(e){return Object(ae.a)({root:{padding:e.spacing(5,2)}})}),se=function(){var e=ue();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},"ERROR 404"),r.a.createElement(k.a,{className:e.root,maxWidth:"sm"},r.a.createElement(f.a,{variant:"h5",paragraph:!0},"NOT FOUND"),r.a.createElement(f.a,{variant:"body"},"Go back to the ",r.a.createElement(me.a,{to:"/",component:p.b},"homepage"))))},de=t(35);var pe=function(e){var a=e.storage,t=a.read,c=a.write,l=Object(n.useState)(t("food-time-space-id")),o=Object(i.a)(l,2),m=o[0],u=o[1];return Object(n.useEffect)(function(){c("food-time-space-id",m)},[m,c]),r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(de.c,null,m?r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{exact:!0,path:"/",render:function(){return r.a.createElement(M,{spaceId:m})}}),r.a.createElement(de.a,{path:"/edit/:id",render:function(e){return r.a.createElement(oe,Object.assign({},e,{spaceId:m}))}})):r.a.createElement(de.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(J,Object.assign({},e,{onSelect:function(e){return u(e)}}))}}),r.a.createElement(de.a,{component:se}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=t(39),fe=t(103),be=t(101),ve=new Ee.a({cache:new be.a({cacheRedirects:{Query:{entry:function(e,a,t){return(0,t.getCacheKey)({__typename:"Entry",id:a.id})}}}}),link:Object(fe.a)({uri:"https://papi.ertrzyiks.me/food-time"})});l.a.render(r.a.createElement(P.a,{client:ve},r.a.createElement(pe,{storage:{read:function(e){return JSON.parse(window.localStorage.getItem(e))},write:function(e,a){return window.localStorage.setItem(e,JSON.stringify(a))}}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},80:function(e,a,t){}},[[110,1,2]]]);
//# sourceMappingURL=main.7d23c55e.chunk.js.map